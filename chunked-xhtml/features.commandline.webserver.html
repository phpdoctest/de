<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: Eingebauter Webserver</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="features.html">Features</a></li>
  <li class="header up"><a href="features.commandline.html">Nutzung auf der Kommandzeile</a></li>
  <li><a href="features.commandline.introduction.html">Introduction</a></li>
  <li><a href="features.commandline.differences.html">Unterschiede zu anderen SAPIs</a></li>
  <li><a href="features.commandline.options.html">Optionen</a></li>
  <li><a href="features.commandline.usage.html">Nutzung</a></li>
  <li><a href="features.commandline.io-streams.html">I/O Streams</a></li>
  <li><a href="features.commandline.interactive.html">Interaktiver Modus</a></li>
  <li class="active"><a href="features.commandline.webserver.html">Eingebauter Webserver</a></li>
  <li><a href="features.commandline.ini.html">INI Einstellungen</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="features.commandline.interactive.html">Interaktiver Modus</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="features.commandline.ini.html">INI Einstellungen</a></div>
                <div class="up"><a href="features.commandline.html">Nutzung auf der Kommandzeile</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="features.commandline.webserver" class="section">
  <h2 class="title">Eingebauter Webserver</h2>
  
  <div class="warning"><strong class="warning">Warnung</strong>
   <p class="para">
    Dieser Webserver wurde entwickelt, um bei der Anwendungsentwicklung zu
    helfen. Er kann ebenso für Testzwecke und für Anwendungsdemonstrationen
    nützlich sein, die in kontrollierten Umgebungen ausgeführt werden. Er ist
    nicht als voll funktioneller Webserver gedacht. Er sollte nicht in einem
    öffentlichen Netzwerk verwendet werden.
   </p>
  </div>

  <p class="para">
   Seit PHP 5.4.0 bietet die <acronym class="acronym">CLI</acronym> <acronym class="acronym">SAPI</acronym> einen eingebauten Webserver.
  </p>
  
  <p class="para">
   PHP Anwendung werden nicht weiter ausgeführt, wenn eine Anfrage blockiert
   wird.
  </p>

  <p class="para">
   URI Anfragen werden von dem aktuellen Arbeitsverzeichnis ausgehend
   ausgeliefert, sofern nicht die -t Option genutzt wurde um einen expliziten
   Document Root anzugeben.
   Wenn eine URI Anfrage keine Datei angibt, wird entweder index.php oder
   index.html aus dem aufgerufenen Verzeichnis zurückgegeben. Wenn beide
   Dateien nicht existieren, wird ein 404 Response Code zurückgeben.
  </p>
  
  <p class="para">
   Wenn auf der Kommandozeile beim Starten des Webservers eine PHP-Datei
   angegeben wird, wird diese als &quot;Router&quot; Skript verwendet.
   Dieses Skript wird dann zu Beginn jedes HTTP Requests gestartet. Wenn dieses
   Skript <strong><code>FALSE</code></strong> zurückgibt, dann wird die angefragte Ressource direkt
   zurückgegeben. Andernfalls wird die Ausgabe des Skripts zurückgegeben.
  </p>

  <p class="para">
   Standard MIME-Typen werden für Dateien mit den folgenden Erweiterungen
   zurückgegeben: .3gp, .apk, .avi, .bmp, .css, .csv, .doc, .docx, .flac, .gif,
   .gz, .gzip, .htm, .html, .ics, .jpe, .jpeg, .jpg, .js, .kml, .kmz, .m4a,
   .mov, .mp3, .mp4, .mpeg, .mpg, .odp, .ods, .odt, .oga, .ogg, .ogv, .pdf,
   .pdf, .png, .pps, .pptx, .qt, .svg, .swf, .tar, .text, .tif, .txt, .wav,
   .webm, .wmv, .xls, .xlsx, .xml, .xsl, .xsd und .zip.
  </p>

  <table class="doctable table">
   <caption><strong>Changelog: Unterstützte MIME-Typen (Dateierweiterungen)</strong></caption>
   
    <thead>
     <tr>
      <th>Version</th>
      <th>Beschreibung</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>5.5.12</td>
      <td>
       .xml, .xsl und .xsd
      </td>
     </tr>

     <tr>
      <td>5.5.7</td>
      <td>
       .3gp, .apk, .avi, .bmp, .csv, .doc, .docx, .flac, .gz, .gzip,
       .ics, .kml, .kmz, .m4a, .mp3, .mp4, .mpg, .mpeg, .mov, .odp, .ods,
       .odt, .oga, .pdf, .pptx, .pps, .qt, .swf, .tar, .text, .tif, .wav,
       .wmv, .xls, .xlsx und .zip
      </td>
     </tr>

     <tr>
      <td>5.5.5</td>
      <td>
       .pdf
      </td>
     </tr>

     <tr>
      <td>5.4.11</td>
      <td>
       .ogg, .ogv und .webm
      </td>
     </tr>

     <tr>
      <td>5.4.4</td>
      <td>
        .htm und .svg
      </td>
     </tr>

    </tbody>
   
  </table>

  
  <div class="example" id="example-400">
   <p><strong>Beispiel #1 Starten des Webservers</strong></p> 
   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ cd ~/public_html
$ php -S localhost:8000</pre>
</div>
   </div>

   <div class="example-contents"><p>
    Die Kommandozeile wird ausgeben:
   </p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
PHP 5.4.0 Development Server started at Thu Jul 21 10:43:28 2011
Listening on localhost:8000
Document root is /home/me/public_html
Press Ctrl-C to quit
</pre></div>
   </div>
   <div class="example-contents"><p>
    Nach URI Anfragen für http://localhost:8000/ und
    http://localhost:8000/myscript.html wird die Kommandozeile
    in etwa so aussehen:
   </p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
PHP 5.4.0 Development Server started at Thu Jul 21 10:43:28 2011
Listening on localhost:8000
Document root is /home/me/public_html
Press Ctrl-C to quit.
[Thu Jul 21 10:48:48 2011] ::1:39144 GET /favicon.ico - Request read
[Thu Jul 21 10:48:50 2011] ::1:39146 GET / - Request read
[Thu Jul 21 10:48:50 2011] ::1:39147 GET /favicon.ico - Request read
[Thu Jul 21 10:48:52 2011] ::1:39148 GET /myscript.html - Request read
[Thu Jul 21 10:48:52 2011] ::1:39149 GET /favicon.ico - Request read
</pre></div>
   </div>
  </div>
  
  <div class="example" id="example-401">
   <p><strong>Beispiel #2 Starten mit einem expliziten Document Root</strong></p> 
   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ cd ~/public_html
$ php -S localhost:8000 -t foo/</pre>
</div>
   </div>

   <div class="example-contents"><p>
    Die Kommandozeile wird ausgeben:
   </p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
PHP 5.4.0 Development Server started at Thu Jul 21 10:50:26 2011
Listening on localhost:8000
Document root is /home/me/public_html/foo
Press Ctrl-C to quit
</pre></div>
   </div>
  </div>
  
  <div class="example" id="example-402">
   <p><strong>Beispiel #3 Nutzung eines Router-Skripts</strong></p> 
   <div class="example-contents"><p>
    In diesem Beispiel werden Anfragen für Bilder diese direkt ausliefern; Anfragen für
    HTML-Dateien, werden stattdessen &quot;Willkommen zu PHP!&quot; ausgeben. 
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;router.php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/\.(?:png|jpg|jpeg|gif)$/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"REQUEST_URI"</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;Liefere&nbsp;die&nbsp;angefragte&nbsp;Ressource&nbsp;direkt&nbsp;aus<br /></span><span style="color: #007700">}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;p&gt;Willkommen&nbsp;zu&nbsp;PHP!&lt;/p&gt;"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ php -S localhost:8000 router.php</pre>
</div>
   </div>

  </div>

  <div class="example" id="example-403">
   <p><strong>Beispiel #4 Prüfung auf die Verwendung des CLI Webservers</strong></p>
<div class="example-contents"><p>
 Um ein Framework-Router-Skript sowohl während der Entwicklung mit dem CLI Webserver
 als auch später mit einem Produktionswebserver zu verwenden:
</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;router.php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">php_sapi_name</span><span style="color: #007700">()&nbsp;==&nbsp;</span><span style="color: #DD0000">'cli-server'</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;route&nbsp;statische&nbsp;Assets&nbsp;und&nbsp;gibt&nbsp;false&nbsp;zurück&nbsp;*/<br /></span><span style="color: #007700">}<br /></span><span style="color: #FF8000">/*&nbsp;weiter&nbsp;mit&nbsp;den&nbsp;normalen&nbsp;index.php&nbsp;Operationen&nbsp;*/<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ php -S localhost:8000 router.php</pre>
</div>
   </div>

  </div>

  <div class="example" id="example-404">
   <p><strong>Beispiel #5 Behandlung nicht unterstützter Dateitypen</strong></p>
<div class="example-contents"><p>
 Wenn Sie statische Ressourcen, deren MIME Typ vom CLI Webserver nicht behandelt
 wird, ausliefern müssen, verwenden Sie:
</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;router.php<br /></span><span style="color: #0000BB">$path&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pathinfo</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"SCRIPT_FILENAME"</span><span style="color: #007700">]);<br />if&nbsp;(</span><span style="color: #0000BB">$path</span><span style="color: #007700">[</span><span style="color: #DD0000">"extension"</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #DD0000">"el"</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Content-Type:&nbsp;text/x-script.elisp"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">readfile</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"SCRIPT_FILENAME"</span><span style="color: #007700">]);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ php -S localhost:8000 router.php</pre>
</div>
   </div>

  </div>

  <div class="example" id="example-405">
   <p><strong>Beispiel #6 Zugriff auf den CLI Webserver von Remote-Computern</strong></p>
<div class="example-contents"><p>
 Sie können den Webserver wie folgt auf Port 8000 für jeden zugänglich machen:
</p></div>
   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">$ php -S 0.0.0.0:8000</pre>
</div>
   </div>

  </div>

 </div>
        </td>
    </tr>
</table>
</body>
</html>
