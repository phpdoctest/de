<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: Apache 2.x auf Unixsystemen</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="install.html">Installation und Konfiguration</a></li>
  <li class="header up"><a href="install.unix.html">Installation auf Unix-Systemen</a></li>
  <li><a href="install.unix.apache.html">Apache 1.3.x auf Unix-Systemen</a></li>
  <li class="active"><a href="install.unix.apache2.html">Apache 2.x auf Unixsystemen</a></li>
  <li><a href="install.unix.nginx.html">Nginx 1.4.x auf Unix Systemen</a></li>
  <li><a href="install.unix.lighttpd-14.html">Lighttpd 1.4 auf Unix systems</a></li>
  <li><a href="install.unix.sun.html">Sun, iPlanet and Netscape servers on Sun Solaris</a></li>
  <li><a href="install.unix.commandline.html">CGI und Kommandozeilen Setups</a></li>
  <li><a href="install.unix.hpux.html">HP-UX spezifische Installationsnotizen</a></li>
  <li><a href="install.unix.openbsd.html">OpenBSD installation notes</a></li>
  <li><a href="install.unix.solaris.html">Solaris specific installation tips</a></li>
  <li><a href="install.unix.debian.html">Debian GNU/Linux-Installationshinweise</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="install.unix.apache.html">Apache 1.3.x auf Unix-Systemen</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="install.unix.nginx.html">Nginx 1.4.x auf Unix Systemen</a></div>
                <div class="up"><a href="install.unix.html">Installation auf Unix-Systemen</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="install.unix.apache2" class="sect1">
 <h2 class="title">Apache 2.x auf Unixsystemen</h2>
 <p class="para">
  Dieser Abschnitt enthält Hinweise und Tipps, die sich auf die Installation
  von PHP speziell für Apache 2.x auf Unixsystemen beziehen.
 </p>

 <div class="warning"><strong class="warning">Warnung</strong><p class="para">Wir empfehlen, in einer
Produktionsumgebung kein Threaded MPM mit Apache2 zu verwenden. Verwenden Sie
stattdessen das Prefork MPM, welches der Standard-MPM für Apace 2.0 und 2.2 ist.
Für weitere Informationen und die Gründe lesen Sie bitte den entsprechenden
FAQ-Eintrag über die Verwendung von
<a href="faq.installation.html#faq.installation.apache2" class="link">Apache2 mit Threaded
MPM.</a></p></div>

 <p class="para">
  Die <a href="http://httpd.apache.org/docs/current/" class="link external">&raquo;&nbsp;Apache Dokumentation</a> ist
  die maßgebliche Informationsquelle für den Apache 2.x Server. Dort können
  weitere Informationen über Installationsoptionen für Apache gefunden
  werden.
 </p>

 <p class="para">
  Die aktuellste Version des Apache HTTP Servers kann von der
  <a href="http://httpd.apache.org/" class="link external">&raquo;&nbsp;Apache Download Site</a> bezogen werden,
  und eine passende PHP-Version von
  den oben angegebenen Quellen. Dieser Schnelleinstieg behandelt
  nur die Grundlagen, um mit Apache 2.x und PHP einzusteigen. Für mehr
  Informationen lesen Sie bitte die <a href="http://httpd.apache.org/docs/current/" class="link external">&raquo;&nbsp;Apache Dokumentation</a>.
  Versionsnummern wurden hier ausgelassen, um sicherzustellen, dass die
  Anweisungen nicht inkorrekt sind. In den folgenden Beispielen sollte &#039;NN&#039;
  durch die spezifische Version des verwendeten Apache ersetzt werden.
 </p>

 <p class="para">
  Es gibt aktuell zwei Versionen von Apache 2.x: 2.0 und 2.2. Obwohl es
  verschiedene Gründe gibt, sich für eine zu entscheiden, ist 2.2 die
  aktuellste Version, und diejenige, die empfohlen wird, wenn sie diese
  Möglichkeit haben. Allerdings funktionieren die folgenden Anweisungen
  sowohl für 2.0 als auch 2.2.
 </p>

 <ol type="1">
  <li class="listitem">
   <p class="para">
    Beziehen Sie den Apache HTTP Server vom oben genannten Ort,
    und entpacken Sie ihn:
   </p>
   <div class="example" id="example-12">
    <div class="example-contents screen">
<div class="cdata"><pre>
gzip -d httpd-2_x_NN.tar.gz
tar -xf httpd-2_x_NN.tar
</pre></div>
    </div>
   </div>
  </li>
  <li class="listitem">
   <p class="para">Beziehen und entpacken Sie die PHP-Quellen gleichermaßen:</p>
   <div class="example" id="example-13">
    <div class="example-contents screen">
<div class="cdata"><pre>
gunzip php-NN.tar.gz
tar -xf php-NN.tar
</pre></div>
    </div>
   </div>
  </li>

  <li class="listitem">
   <p class="para">
    Kompilieren und installieren Sie Apache. Entnehmen Sie der Apache
    Installationsdokumentation weitere Details zur Kompilierung.
   </p>
   <div class="example" id="example-14">
    <div class="example-contents screen">
<div class="cdata"><pre>
cd httpd-2_x_NN
./configure --enable-so
make
make install
</pre></div>
    </div>
   </div>
  </li>

  <li class="listitem">
   <p class="para">
    Nun steht Ihnen Apache 2.x.NN unter /usr/local/apache2 zur Verfügung,
    konfiguriert mit Unterstützung für nachladbare Module und dem
    Standard MPM Prefork. Um diese Installation zu testen, verwenden Sie die
    übliche Prozedur, den Apacheserver zu starten, also z.B.:
    <div class="example" id="example-15">
     <div class="example-contents screen">
<div class="cdata"><pre>
       /usr/local/apache2/bin/apachectl start
</pre></div>
     </div>
    </div>
    Stoppen Sie nun den Server, um mit der Konfiguration von PHP fortzufahren:
    <div class="example" id="example-16">
     <div class="example-contents screen">
<div class="cdata"><pre>
       /usr/local/apache2/bin/apachectl stop.
</pre></div>
     </div>
    </div>
   </p>
  </li>

  <li class="listitem">
   <p class="para">
    Konfigurieren und kompilieren Sie nun Ihr PHP. Dies ist die Stelle, an der Sie Ihr
    PHP mit verschiedenen Optionen, wie etwa installierten Erweiterungen,
    anpassen können. Rufen Sie ./configure --help auf, um eine Liste
    der verfügbaren Optionen zu erhalten. In unserem Beispiel werden
    wir eine einfache Konfiguration mit Unterstützung für Apache 2
    und MySQL erzeugen.
   </p>
   <p class="para">
    Wenn Sie Apache aus den Quelltexten kompiliert haben, wie oben beschrieben
    wurde, dann stimmt im folgenden Beispiel der Pfad von apxs, aber wenn Sie
    Apache auf andere Weise installiert haben, müssen Sie den Pfad von apxs
    entsprechend anpassen. Es ist zu beachten, dass einige Distros
    möglicherweise apxs zu apxs2 umbenennen.
   </p>
   <div class="example" id="example-17">
    <div class="example-contents screen">
<div class="cdata"><pre>
cd ../php-NN
./configure --with-apxs2=/usr/local/apache2/bin/apxs --with-mysql
make
make install
</pre></div>
    </div>
   </div>
   <p class="para">
    Wenn Sie sich entscheiden, Ihre Konfigurationsoptionen nach der
    Installation zu ändern, müssen Sie nur die configure, make und make install Schritte
    wiederholen. Sie müssen nur Apache neustarten, damit das neue
    Modul verwendet wird. Eine erneute Kompilierung von Apache ist
    nicht notwendig.
   </p>
   <p class="para">
    Beachten Sie, dass, wenn nicht anders erwähnt, &#039;make install&#039; ebenso
    PEAR und verschiedene PHP Werkzeuge wie phpize, PHP CLI und anderes
    installieren wird.
   </p>
  </li>

  <li class="listitem">
   <p class="para">
    Ihre php.ini einrichten
   </p>
   <div class="example" id="example-18">
    <div class="example-contents screen">
<div class="cdata"><pre>
cp php.ini-development /usr/local/lib/php.ini
</pre></div>
    </div>
   </div>
   <p class="para">
    Sie können Ihre .ini-Datei ändern, um verschiedene PHP-Optionen zu setzen.
    Wenn Sie die php.ini-Datei an einer anderen Stelle bevorzugen, verwenden
    Sie --with-config-file-path=/some/path in Schritt 5.
   </p>
   <p class="para">
    Wenn Sie sich stattdessen für php.ini-production entscheiden, stellen Sie
    sicher, dass Sie die darin enthaltene Liste von Änderungen lesen, da diese
    das Verhalten von PHP beeinflussen.
   </p>
  </li>

  <li class="listitem">
   <p class="para">
    Bearbeiten Sie Ihre httpd.conf, um das PHP Modul zu laden. Der Pfad
    auf der rechten Seite der LoadModule-Anweisung muss auf den Ort des
    PHP-Moduls auf Ihrem System zeigen. Das obige make install könnte dies
    bereits für Sie hinzugefügt haben, aber prüfen Sie dies.
   </p>
   <div class="example" id="example-19">
    <div class="example-contents">
<div class="apache-confcode"><pre class="apache-confcode">LoadModule php5_module modules/libphp5.so</pre>
</div>
    </div>

   </div>
  </li>

  <li class="listitem">
   <p class="para">
    Weisen Sie Apache an, bestimmte Dateiendungen als PHP Skripte zu behandeln.
    Zum Beispiel werden wir den Apache Dateien mit der Endung .php als PHP
    ausführen lassen. Anstatt nur die Apachedirektive AddType zu verwenden,
    wollen wir zusätzlich verhindern, dass potentiell gefährliche hochgeladene
    und erzeugte Dateien wie exploit.php.jpg als PHP-Dateien ausgeführt werden.
    Wenn Sie dieses Beispiel verwenden, können Sie jede Dateiendung als PHP
    interpretieren lassen, wenn Sie sie einfach hinzufügen. Wir demonstrieren
    dies, indem wir .php einfügen.
   </p>
   <div class="example" id="example-20">
    <div class="example-contents">
<div class="apache-confcode"><pre class="apache-confcode">&lt;FilesMatch \.php$&gt;
    SetHandler application/x-httpd-php
&lt;/FilesMatch&gt;</pre>
</div>
    </div>

   </div>
   <p class="para">
    Oder wenn wir erlauben wollen, dass .php, .php2, .php3, .php4, .php5, .php6
    und .phtml und sonst nichts als PHP interpretiert werden, könnten wird
    ein Statement wie dieses verwenden:
   </p>
   <div class="example" id="example-21">
    <div class="example-contents">
<div class="apache-confcode"><pre class="apache-confcode">&lt;FilesMatch &quot;\.ph(p[2-6]?|tml)$&quot;&gt;
    SetHandler application/x-httpd-php
&lt;/FilesMatch&gt;</pre>
</div>
    </div>

   </div>
   <p class="para">
    Und um zu erlauben, dass .phps Dateien vom PHP Source-Filter verarbeitet und
    als Quellcode mit Syntax-Highlighting angezeigt werden, verwenden Sie:
   </p>
   <div class="example" id="example-22">
    <div class="example-contents">
<div class="apache-confcode"><pre class="apache-confcode">&lt;FilesMatch &quot;\.phps$&quot;&gt;
    SetHandler application/x-httpd-php-source
&lt;/FilesMatch&gt;</pre>
</div>
    </div>

   </div>
   <p class="para">
    mod_rewrite kann verwendet werden, um zu erlauben, dass jede beliebige .php
    Datei als Quellcode mit Syntax-Highlighting angezeigt wird, ohne dass sie
    die Datei zu .phps umbenennen oder kopieren müssen:
   </p>
   <div class="example" id="example-23">
    <div class="example-contents">
<div class="apache-confcode"><pre class="apache-confcode">RewriteEngine On
RewriteRule (.*\.php)s$ $1 [H=application/x-httpd-php-source]</pre>
</div>
    </div>

   </div>
   <p class="para">
    Der PHP-Source-Filter sollte auf Produktionssystemen nicht aktiviert werden,
    da er vertrauliche oder anderweise sensible Informationen, die im Quellcode
    enthalten sind, preisgeben könnte.
   </p>
  </li>

  <li class="listitem">
   <p class="para">
    Verwenden Sie die übliche Prozedur, um den Apache Server zu starten, z.B.:
   </p>
   <div class="example" id="example-24">
    <div class="example-contents screen">
<div class="cdata"><pre>
/usr/local/apache2/bin/apachectl start
</pre></div>
    </div>
   </div>

   <p class="para">ODER</p>
   <div class="example" id="example-25">
    <div class="example-contents screen">
<div class="cdata"><pre>
service httpd restart
</pre></div>
    </div>
   </div>
  </li>
 </ol>

 <p class="para">
  Wenn Sie den obigen Anweisungen folgen, werden Sie einen laufenden
  Apache2 mit Unterstützung für PHP als <em>SAPI</em>-Modul
  erhalten. Natürlich existieren für Apache und PHP viele weitere
  Konfigurationseinstellungen. Verwenden Sie
  <strong class="command">./configure --help</strong> im jeweiligen Quellcodeverzeichnis,
  um weitere Informationen zu erhalten.
 </p>
 <p class="para">
  Apache2 kann multithreaded kompiliert werden, indem das
  <var class="filename">worker</var> MPM anstatt des normalen
  <var class="filename">prefork</var> MPM für den Build gewählt wird. Dies erfolgt,
  indem die folgende Option zu dem Argument, das weiter oben in Schritt 3 an
  ./configure übergeben wird, hinzugefügt wird:
 </p>
 <div class="example" id="example-26">
  <div class="example-contents screen">
<div class="cdata"><pre>
--with-mpm=worker
</pre></div>
  </div>
 </div>
 <p class="para">
  Dies sollte nicht durchgeführt werden, ohne sich der Konsequenzen dieser
  Entscheidung bewusst zu sein, und zumindest eine angemesse Kenntnis der
  Implikationen zu haben. Die Apache Dokumentation bezüglich der <a href="http://httpd.apache.org/docs/current/mpm.html" class="link external">&raquo;&nbsp;MPM-Module</a> erörtert MPMs sehr
  ausführlich.
 </p>
 <blockquote class="note"><p><strong class="note">Hinweis</strong>: 
  <p class="para">
   Das <a href="faq.installation.html#faq.installation.apache.multiviews" class="link">Apache MultiViews
   FAQ</a> erörtert die Verwendung von Multiviews mit PHP.
  </p>
 </p></blockquote>
 <blockquote class="note"><p><strong class="note">Hinweis</strong>: 
  <p class="para">
   Um eine Multithreaded Version von Apache zu erzeugen, muss das Zielsystem
   Threads unterstützen. In diesem Fall sollte auch PHP mit der
   experimentellen Zend Thread Safety (ZTS) kompiliert werden. Unter dieser Konfiguration sind nicht
   alle Erweiterungen verfügbar. Die empfohlene Einstellung ist es,
   Apache mit dem normalen <var class="filename">prefork</var> -MPM-Modul zu bauen.
  </p>
 </p></blockquote>
</div>
        </td>
    </tr>
</table>
</body>
</html>
