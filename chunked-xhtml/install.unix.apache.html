<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: Apache 1.3.x auf Unix-Systemen</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="install.html">Installation und Konfiguration</a></li>
  <li class="header up"><a href="install.unix.html">Installation auf Unix-Systemen</a></li>
  <li class="active"><a href="install.unix.apache.html">Apache 1.3.x auf Unix-Systemen</a></li>
  <li><a href="install.unix.apache2.html">Apache 2.x auf Unixsystemen</a></li>
  <li><a href="install.unix.nginx.html">Nginx 1.4.x auf Unix Systemen</a></li>
  <li><a href="install.unix.lighttpd-14.html">Lighttpd 1.4 auf Unix systems</a></li>
  <li><a href="install.unix.sun.html">Sun, iPlanet and Netscape servers on Sun Solaris</a></li>
  <li><a href="install.unix.commandline.html">CGI und Kommandozeilen Setups</a></li>
  <li><a href="install.unix.hpux.html">HP-UX spezifische Installationsnotizen</a></li>
  <li><a href="install.unix.openbsd.html">OpenBSD installation notes</a></li>
  <li><a href="install.unix.solaris.html">Solaris specific installation tips</a></li>
  <li><a href="install.unix.debian.html">Debian GNU/Linux-Installationshinweise</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="install.unix.html">Installation auf Unix-Systemen</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="install.unix.apache2.html">Apache 2.x auf Unixsystemen</a></div>
                <div class="up"><a href="install.unix.html">Installation auf Unix-Systemen</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="install.unix.apache" class="sect1">
    <h2 class="title">Apache 1.3.x auf Unix-Systemen</h2>
    <p class="para">
     Dieser Abschnitt beinhaltet Hinweise und Tipps, die sich auf die
     Installation von PHP speziell für Apache auf Unix-Plattformen beziehen.
     Wir haben <a href="install.unix.apache2.html" class="link">Anweisungen und
     Hinweise für Apache 2 auf einer eigenen Seite</a>.
    </p>   
    <p class="para">
     Die Anweisungen, die Sie zum unten in Zeile 10 abgebildeten
     <strong class="command">configure</strong>-Aufruf hinzufügen können, können Sie aus der
     <a href="configure.html" class="link">Liste von grundlegenden
     Configure-Optionen</a> und aus den für Erweiterungen spezifiscen
     Optionen, die auf den jeweiligen Handbuchseiten beschrieben sind,
     auswählen. Um sicherzustellen, dass die Anweisungen nicht inkorrekt sind,
     wurden Versionsnummern hier ausgelassen. Sie müssen die Zeichenkette
     &#039;xxx&#039; hier mit den zu Ihren Dateien passenden Werten ersetzen.
    </p>

    <div class="example" id="install.unix.apache.example">
     <p><strong>Beispiel #1 
      Installationsanweisungen (Apache Shared Module Version) für PHP
     </strong></p>
     <div class="example-contents screen">
<div class="cdata"><pre>
1.  gunzip apache_xxx.tar.gz
2.  tar -xvf apache_xxx.tar
3.  gunzip php-xxx.tar.gz
4.  tar -xvf php-xxx.tar
5.  cd apache_xxx
6.  ./configure --prefix=/www --enable-module=so
7.  make
8.  make install
9.  cd ../php-xxx

10. Konfigurieren Sie jetzt Ihr PHP. Dies ist die Stelle, an der Sie
    Ihr PHP mit verschiedenen Optionen, z.B. welche Erweiterungen aktiviert
    sein werden, anpassen können. Rufen Sie ./configure --help für eine Liste
    von verfügbaren Optionen auf. In unseren beispiel werden wir eine einfache
    Konfiguration mit Unterstützung für Apache 1 und MySQL vornehmen. Ihr
    Pfad zu apxs könnte von unserem Beispiel abweichen.

      ./configure --with-mysql --with-apxs=/www/bin/apxs

11. make
12. make install

    Falls Sie sich entscheiden, die Werte Ihrer Konfiguration nach der
    Installation zu ändern, müssen Sie nur die letzten drei Schritte
    wiederholen. Sie müssen nur Apache neu starten, damit das neue Modul
    aktiv wird. Eine erneute Kompilation von Apache ist nicht erforderlich.

    Beachten Sie, dass &#039;make install&#039;, falls nicht anders angewiesen,
    ebenfalls PEAR, verschiedene PHP-Tools wie phpize, das PHP CLI und mehr
    installieren wird.

13. Ihre php.ini Datei einrichten:

      cp php.ini-development /usr/local/lib/php.ini

    Sie können Ihre .ini-Datei bearbeiten, um verschiedene PHP-Einstellungen
    vorzunehmen. Wenn Sie es bevorzugen, Ihre php.ini-Datei an anderer
    Stelle zu haben, verwenden Sie --with-config-file-path=/irgendein/pfad
    in Schritt 10.

    Wenn Sie stattdessen php.ini-production auswählen stellen Sie sicher, dass
    Sie die enthaltenen Änderungen lesen, da diese sich auf das Verhalten von
    PHP auswirken.

14. Ändern Sie Ihre httpd.conf-Datei, damit das PHP-Modul geladen wird. Der
    Pfad auf der rechten Seite des LoadModule Befehls muss zum Pfad des
    PHP-Moduls auf Ihrem System zeigen. Das &#039;make install&#039; von oben könnte
    dies bereits für Sie hinzugefügt haben, aber prüfen Sie dies nach.

      LoadModule php5_module libexec/libphp5.so

15. Fügen Sie dies im AddModule-Abschnitt Ihrer httpd.conf, irgendwo unterhalb
    von ClearModuleList, hinzu:

      AddModule mod_php5.c

16. Sagen Sie Ihrem Apache, bestimmte Dateiendungen als PHP zu parsen. Zum 
    Beispiel lassen wir die .php-Dateiendung als PHP behandeln. Sie können
    jede Erweiterung als PHP parsen lassen, indem Sie einfach weitere
    Endungen, jeweils durch ein Leerzeichen getrennt, hinzufügen. Wir fügen
    .phtml hinzu, um dies vorzuführen. 

      AddType application/x-httpd-php .php .phtml

    Es ist weiterhin üblich, die .phps-Dateiendung zu konfigurieren, damit
    diese farblich hervorgehobenen Quellcode anzeigt. Dies kann wie folgt
    eingerichtet werden:
    
      AddType application/x-httpd-php-source .phps

17. Verwenden Sie Ihre normale Prozedur, um den Apache zu starten. (Sie müssen
    den Server anhalten und neu starten, nicht nur ein erneutes laden des
    Servers mittels eines HUP- oder USR1-Signals veranlassen.)
</pre></div>
     </div>
    </div>

    <p class="para">
     Alternativ, um PHP als statisches Objekt zu installieren:
    </p>

    <div class="example" id="install.unix.apache.example-static">
     <p><strong>Beispiel #2 
      Installationsanweisungen (Statische Modulinstallation für Apache) für
      PHP
     </strong></p>
     <div class="example-contents screen">
<div class="cdata"><pre>
1.  gunzip -c apache_1.3.x.tar.gz | tar xf -
2.  cd apache_1.3.x
3.  ./configure
4.  cd ..

5.  gunzip -c php-5.x.y.tar.gz | tar xf -
6.  cd php-5.x.y
7.  ./configure --with-mysql --with-apache=../apache_1.3.x
8.  make
9.  make install

10. cd ../apache_1.3.x

11. ./configure --prefix=/www --activate-module=src/modules/php5/libphp5.a
    (Die obige Zeile ist korrekt! Ja, wir wissen, dass libphp5.a zu diesem
    Zeitpunkt nicht existiert. Das soll sie auch noch nicht. Sie wird
    angelegt werden.)

12. make
    (Sie sollten jetzt eine ausführbare Datei httpd haben, welche Sie in Ihr
    Apache-Binärverezichnis kopieren können. Wenn dies Ihre Erstinstallation
    ist, müssen Sie außerdem noch &quot;make install&quot; aufrufen)

13. cd ../php-5.x.y
14. cp php.ini-development /usr/local/lib/php.ini

15. Sie können /usr/local/lib/php.ini bearbeiten, um PHP-Einstellungen zu
    ändern. Bearbeiten Sie Ihre httpd.conf oder srm.conf-Datei und fügen Sie
    folgendes hinzu:

    AddType application/x-httpd-php .php
</pre></div>
      </div>
     </div>

     <p class="para">
      Abhängig von Ihrer Apacheinstallation und Unixvariante gibt es viele
      verschiedene Methoden, um den Server anzuhalten und erneut zu starten.
      Unten sind für verschiedene Apache/Unix-Installationen einige typische
      Zeilen zum Neustart des Servers. Sie sollten <em>/path/to</em>
      mit dem Pfad dieser Anwendungen auf Ihrem System ersetzen.
     </p>
     <p class="para">
      <div class="example" id="example-11">
       <p><strong>Beispiel #3 Beispielbefehle, um Apache neu zu starten</strong></p>
       <div class="example-contents">
<div class="shellcode"><pre class="shellcode">1. Verschiedene Linux- und SysV-Varianten:
/etc/rc.d/init.d/httpd restart

2. Verwendung der apachectl Skripte:
/path/to/apachectl stop
/path/to/apachectl start

3. httpdctl und httpsdctl (mit OpenSSL), ähnlich wie apachectl:
/path/to/httpsdctl stop
/path/to/httpsdctl start

4. Mit mod_ssl oder einem anderen SSL Server, könnten Sie manuell stoppen
   und starten wollen:
/path/to/apachectl stop
/path/to/apachectl startssl</pre>
</div>
       </div>

      </div>
     </p>
     <p class="para">
      Die Orte der apachectl- und http(s)dctl-Binärdateien sind häufig
      verschieden. Wenn Ihr System einen <em>locate</em>-,
      <em>whereis</em>- oder <em>which</em>-Befehl
      besitzt, können diese Ihnen beim Auffinden des Serverkontrollprogrammes
      helfen.
     </p>

     <p class="para">
      Verschiedene Beispiele zur Kompilierung von PHP für Apache wie folgt:
      <div class="informalexample">
       <div class="example-contents">
<div class="shellcode"><pre class="shellcode">./configure --with-apxs --with-pgsql</pre>
</div>
       </div>

      </div>
     </p>
     <p class="para">
      Dies wird eine Bibliothek <var class="filename">libphp5.so</var> erzeugen, die
      mittels einer LoadModule-Zeile in der <var class="filename">httpd.conf</var> des Apache geladen
      wird. PostgreSQL-Unterstützung ist in diese Bibliothek eingebaut.
     </p>
     <p class="para">
      <div class="informalexample">
       <div class="example-contents">
<div class="shellcode"><pre class="shellcode">./configure --with-apxs --with-pgsql=shared</pre>
</div>
       </div>

      </div>
     </p>
     <p class="para">
      Dies wird eine Bibliothek <var class="filename">libphp5.so</var> für Apache
      erzeugen, aber ebenso eine <var class="filename">pgsql.so</var>, die von PHP
      mit der Extension-Direktive in der <var class="filename">php.ini</var>-Datei oder durch explizites
      Laden in einem Skript mittels der Funktion <span class="function">dl</span>
      geladen wird.
     </p>
     <p class="para">
      <div class="informalexample">
       <div class="example-contents">
<div class="shellcode"><pre class="shellcode">./configure --with-apache=/path/to/apache_source --with-pgsql</pre>
</div>
       </div>

      </div>
     </p>
     <p class="para">
      Dies wird eine Bibliothek <var class="filename">libmodphp5.a</var>, eine
      <var class="filename">mod_php5.c</var> und einige zugehörige Dateien erzeugen
      und diese in das Verzeichnis <em>src/modules/php5</em>
      des Apache Quellcodes kopieren. Kompilieren Sie danach Apache mit
      <em>--activate-module=src/modules/php5/libphp5.a</em> und das
      Apache Build System wird eine <var class="filename">libphp5.a</var> erzeugen
      und statisch in die Binärdatei <var class="filename">httpd</var> einbinden.
      Unterstützung für PostgreSQL wird in diese <var class="filename">httpd</var>
      Binärdatei mit eingebaut, weshalb das Endergebnis eine einzige Datei
      namens <var class="filename">httpd</var> ist, welche den gesamten Apache und
      PHP beinhaltet.
     </p>
     <p class="para">
      <div class="informalexample">
       <div class="example-contents">
<div class="shellcode"><pre class="shellcode">./configure --with-apache=/path/to/apache_source --with-pgsql=shared</pre>
</div>
       </div>

      </div>
     </p>
     <p class="para">
      Genau wie oben, aber anstatt die Unterstützung für PostgreSQL direkt
      in <var class="filename">httpd</var> mit einzubinden wird eine gemeinsam
      verwendete Bibliothek namens <var class="filename">pgsql.so</var> erzeugt, die
      man mittels der <var class="filename">php.ini</var> Datei oder direkt über <span class="function">dl</span>
      in PHP einbinden kann.
     </p>
     <p class="para">
      Wenn Sie aus den verschiedenen Möglichkeiten auswählen, PHP zu
      kompilieren, sollten Sie die Vor- und Nachteile der jeweiligen Methoden
      bedenken. Das Erzeugen einer gemeinsam verwendeten Bibliothek resultiert
      darin, dass man Apache getrennt kompilieren kann und nicht alles erneut
      kompilieren muss, wenn man etwas zu PHP hinzufügt oder ändert. Das
      direkte Einbauen in Apache (statisch) bedeutet, dass PHP schneller lädt
      und schneller läuft. Für weitere Informationen konsultieren Sie die
      Apache <a href="http://httpd.apache.org/docs/current/dso.html" class="link external">&raquo;&nbsp;Webseite zur
      DSO-Unterstützung</a>.
     </p>
    <blockquote class="note"><p><strong class="note">Hinweis</strong>: 
     <p class="para">
      Apaches mitgelieferte <var class="filename">httpd.conf</var> enthält derzeit einen Abschnitt, der
      wie folgt aussieht:
      <div class="informalexample">
       <div class="example-contents">
<div class="apache-confcode"><pre class="apache-confcode">User nobody
Group &quot;#-1&quot;</pre>
</div>
       </div>

      </div>
      Wenn man dies nicht auf &quot;Group nogroup&quot; oder etwas ähnliches (&quot;Group
      daemon&quot; ist auch üblich) ändert, wird PHP nicht imstande sein, Dateien
      zu öffnen.
     </p>
    </p></blockquote>  
    <blockquote class="note"><p><strong class="note">Hinweis</strong>: 
     <p class="para">
      Stellen Sie sicher, dass Sie die installierte Version von apxs angeben,
      wenn Sie <strong class="option configure">--with-apxs=/path/to/apxs</strong>

      verwenden. Sie dürfen NICHT die apxs-Version angeben, die dem Apache
      Quellcode beiliegt, sondern jene, die tatsächlich auf Ihrem System
      installiert ist.
     </p>
    </p></blockquote>   
   </div>
        </td>
    </tr>
</table>
</body>
</html>
