<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: Sicheres Password Hashing</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="faq.html">FAQ</a></li>
  <li><a href="faq.general.html">Allgemeine Informationen</a></li>
  <li><a href="faq.mailinglist.html">Mailing-Listen</a></li>
  <li><a href="faq.obtaining.html">PHP beziehen</a></li>
  <li><a href="faq.databases.html">PHP und Datenbanken</a></li>
  <li><a href="faq.installation.html">Installation</a></li>
  <li><a href="faq.build.html">Probleme bei der Kompilierung</a></li>
  <li><a href="faq.using.html">PHP benutzen</a></li>
  <li class="active"><a href="faq.passwords.html">Password Hashing</a></li>
  <li><a href="faq.html.html">PHP und HTML</a></li>
  <li><a href="faq.com.html">PHP und COM</a></li>
  <li><a href="faq.misc.html">Verschiedene Fragen</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="faq.using.html">PHP benutzen</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="faq.html.html">PHP und HTML</a></div>
                <div class="up"><a href="faq.html">FAQ</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="faq.passwords" class="chapter">
  <h1>Sicheres Password Hashing</h1>
  
  
  <p class="para">
   Dieser Absatz erklärt, warum Hash Funktionen zur sicheren Passwortspeicherung benutzt werden, 
   und wie dies am effektivsten bewerkstelligt werden kann.
  </p>
  
  <div class="qandaset"><ol class="qandaset_questions"><li><a href="#faq.passwords.hashing">
     
      Warum sollte ich die Passw&ouml;rter der User meiner Anwendung hashen?
     
    </a></li><li><a href="#faq.passwords.fasthash">
     
      Warum sind verbreitete Hashfunktionen wie md5 und sha1 
      nicht f&uuml;r die Speicherung von Passw&ouml;rtern geeignet?
     
    </a></li><li><a href="#faq.passwords.bestpractice">
     
      Wie sollte ich meine Passw&ouml;rter hashen, wenn die &uuml;blichen Hashfunktionen unbrauchbar sind?
     
    </a></li><li><a href="#faq.passwords.salt">
     
      Was ist ein Salt?
     
    </a></li><li><a href="#faq.password.storing-salts">
     
      Wie speichere ich meine Salts?
     
    </a></li></ol></div>
   <dl class="qandaentry" id="faq.passwords.hashing">
    <dt><strong>
     
      Warum sollte ich die Passwörter der User meiner Anwendung hashen?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      Passworthashing ist eine der grundlegendsten Sicherheitsüberlegungen, 
      die beim Design einer Anwendung bedacht werden müssen.
      Ohne Hashing können im Falle eines erfolgreichen Angriffs alle Userpasswörter in Ihrer Datenbank
      von einem Angreifer gestohlen und ohne Umwege in anderen Anwendungen (seien es Ihre oder die Anderer) benutzt werden.
      Dies ist oft der Fall, da viele User für verschiedene Dienste die gleichen Passwörter verwenden.
     </p>
     <p class="para">
      Wenn Sie Passwörter vor dem Abspeichern in der Datenbank hashen, 
      machen Sie es einen Angreifer schwerer die ursprünglichen Passwörter herauszufinden.
      Sie haben jedoch weiterhin die Möglichkeit eingegebene Userpasswörter zu hashen und die Hashwerte zu vergleichen
      um herauszufinden, ob der User das richtige Passwort eingegeben hat.
     </p>
     <p class="para">
      Es ist jedoch wichtig zu wissen, dass Hashen nur das Auslesen der Passwörter aus dem Datenspeicher 
      (z.B.: Datenbank oder Datei) erschwert. Sollte es einen Angreifer gelingen Code in Ihre Anwendung einzuschleusen,
      so kann er die Passwörter der User evtl. Auslesen bevor dieses gehasht werden.
     </p>
    </dd>
   </dl>
   <dl class="qandaentry" id="faq.passwords.fasthash">
    <dt><strong>
     
      Warum sind verbreitete Hashfunktionen wie <span class="function">md5</span> und <span class="function">sha1</span> 
      nicht für die Speicherung von Passwörtern geeignet?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      Hashalgorithmen wie MD5, SHA1 und SHA256 sind auf Geschwindigkeit und Effizienz optimiert.
      Mit modernen Techniken und leistungsstarker Hardware ist es aber trivial geworden
      diese Hashalgorithmen mit &quot;brute force&quot; Attacken anzugreifen.
     </p>
     <p class="para">
      Weil moderne Computer diese Hashalgorithmen leicht brechen können,
      werden diese von Sicherheitsspezialisten nicht für die Speicherung von Passwörtern empfohlen.
     </p>
    </dd>
   </dl>
   <dl class="qandaentry" id="faq.passwords.bestpractice">
    <dt><strong>
     
      Wie sollte ich meine Passwörter hashen, wenn die üblichen Hashfunktionen unbrauchbar sind?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      Wenn es um das Hashen von Passwörtern geht müssen zwei wichtige Sachen bedacht werden:
      Der Berechnungsaufwand und das Salt. Wenn es länger dauert einen Hash zu berechnen
      wird ein Brute Force Angriff stark verzögert. Jedoch ist zu beachten, dass der Berechnungsaufwand
      sich im normalen Betrieb nicht negativ auf die Performance der Anwendung auswirkt. Das Salt hingegen dient dazu,
      die Erstellung von vorberechneten Rainbowtables zu verhindern, da durch das Salt auch gleiche Passwörter unterschiedliche
      Hashes erhalten.
     </p>
     <p class="para">
      PHP 5.5 bietet
      <a href="book.password.html" class="link">eine native Passworthashing API</a> die sich auf eine sichere Art
      um das <a href="function.password-hash.html" class="link">Hashen</a>
      und <a href="function.password-verify.html" class="link">Verifizieren</a> von Passwörtern kümmert.
      Ebenso existiert eine
      <a href="https://github.com/ircmaxell/password_compat" class="link external">&raquo;&nbsp;native PHP kompatible Bibliothek</a>
      für PHP Versionen ab 5.3.7.
     </p>
     <p class="para">
      Eine andere Option ist die <span class="function">crypt</span> Funktion, die mehrere Hashalgorithmen unterstützt.
      Diese existiert ab Version 5.3.7. Wenn diese Funktion benutzt wird, ist es garantiert,
      dass der Hashalgorithmus unterstützt wird, da PHP native Implementierungen für die Algorithmen besitzt,
      die benutzt werden, wenn von dem Betriebsystem nicht angebotene Algorithmen benutzt werden.
     </p>
     <p class="para">
      Der empfohlene Algorithmus für das Hashen von Passwörtern ist Blowfish, welcher auf als 
      Standardalgorithmus von der Passwort Hashing API benutzt wird, da dieser einen signifikant höheren
      Berechnungsaufwand als MD5 oder SHA1 voraussetzt und trotzdem weiterhin skalierbar ist.
     </p>
     <p class="para">
      Bitte beachten Sie: Wenn Sie <span class="function">crypt</span> benutzen um Passwörter zu verifizieren
      müssen sie dafür sorgen, Timing Attacken zu verhindern. Dies kann durch Stringvergleiche mit konstanter
      Laufzeit geschehen. Jedoch bieten die PHP Vergleichsoperatoren 
      <a href="language.operators.comparison.html" class="link">== und ===</a> keine konstante Laufzeit.
      Da jedoch <span class="function">password_verify</span> eine konstante Laufzeit besitzt ist es 
      stark empfohlen die <a href="book.password.html" class="link">native Passwort Hashing API</a>
      zu benutzen, wenn dies möglich ist.
     </p>
    </dd>
   </dl>
   <dl class="qandaentry" id="faq.passwords.salt">
    <dt><strong>
     
      Was ist ein Salt?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      Ein kryptografisches Salt sind Daten, die während des Hashens an das Passwort angefügt werden
      um die Möglichkeit des Angriffs über Rainbowtables zu erschweren. Rainbowtables sind
      bereits vorberechnete Paare (Schlüssel, Hash), die benutzt werden können, um für einen
      gegebenen Hash das vorberechnete Passwort nachzuschlagen.
     </p>
     <p class="para">
      In einfachen Worten: Ein Hash sind zusätzliche Daten, die es erschweren das Passwort zu knacken.
      Es gibt Onlinedienste bei denen man für einen gegebenen Hash das dazugehörige Passwort
      herrausfinden kann. Die Benutzung eines Salts macht es unpraktisch bis unmöglich 
      das Passwort durch die Benutzung dieser Dienste zu finden.
     </p>
     <p class="para">
      Die Funktion <span class="function">password_hash</span> generiert ein zufälliges Salt, 
      sollte beim Aufruf der Funktion keines übergeben werden.
      Dies ist generell der einfachste und sicherste Ansatz.
     </p>
    </dd>
   </dl>
   <dl class="qandaentry" id="faq.password.storing-salts">
    <dt><strong>
     
      Wie speichere ich meine Salts?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      Die Funktionen <span class="function">password_hash</span> oder
      <span class="function">crypt</span> geben den Salt als einen Teil des generierten
      Hashs zurück. Dieser Wert sollte unverändert abgespeichert werden, 
      da er Informationen über den Hashalgorithmus enthält und direkt an die
      Funktion <span class="function">password_verify</span> oder <span class="function">crypt</span>
      übergeben werden kann um ein Passwort zu verifzieren.
     </p>
     <p class="para">
      Das folgende Diagramm zeigt das Format eines Rückgabewertes der Funktionen
      <span class="function">crypt</span> oder <span class="function">password_hash</span>.
      Wie sie sehen können, enthalten die Hashes alle Informationen über
      Hashalgorithmus und Salt, wie sie für die spätere Verifikation von Passwörtern
      benötigt werden.
     </p>
     <p class="para">
      <div class="mediaobject">
       
       <div class="imageobject">
        <img src="images/2a34c7f2e658f6ae74f3869f2aa5886f-crypt-text-rendered.svg" alt="
        Die Komponenten des Rückgabewerten von password_hash und crypt in dieser Reihenfolge:
        Der benutze Algorithmus, die Optionen des Algorithmus, das benutzte Salt und das gehashte Passwort.
       " width="690" height="192" />
       </div>
      </div>
     </p>
    </dd>
   </dl>
  
  
 </div>
        </td>
    </tr>
</table>
</body>
</html>
