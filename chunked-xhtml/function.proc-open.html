<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: F&uuml;hrt ein Kommando aus und &ouml;ffnet Dateizeiger f&uuml;r die Ein- und Ausgabe</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="funcref.html">Funktionsreferenz</a></li>
  <li class="header up"><a href="refs.fileprocess.process.html">Erweiterungen zur Prozesskontrolle</a></li>
  <li class="header up"><a href="book.exec.html">Programmausf&uuml;hrung</a></li>
  <li class="header up"><a href="ref.exec.html">Funktionen zur Programmausf&uuml;hrung</a></li>
  <li><a href="function.escapeshellarg.html">escapeshellarg</a></li>
  <li><a href="function.escapeshellcmd.html">escapeshellcmd</a></li>
  <li><a href="function.exec.html">exec</a></li>
  <li><a href="function.passthru.html">passthru</a></li>
  <li><a href="function.proc-close.html">proc_close</a></li>
  <li><a href="function.proc-get-status.html">proc_get_status</a></li>
  <li><a href="function.proc-nice.html">proc_nice</a></li>
  <li class="active"><a href="function.proc-open.html">proc_open</a></li>
  <li><a href="function.proc-terminate.html">proc_terminate</a></li>
  <li><a href="function.shell-exec.html">shell_exec</a></li>
  <li><a href="function.system.html">system</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="function.proc-nice.html">proc_nice</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="function.proc-terminate.html">proc_terminate</a></div>
                <div class="up"><a href="ref.exec.html">Funktionen zur Programmausf&uuml;hrung</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="function.proc-open" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">proc_open</h1>
  <p class="refpurpose">
   Führt ein Kommando aus und öffnet Dateizeiger für die Ein- und Ausgabe
  </p>
 </div>

 <div class="refsect1 description" id="refsect1-function.proc-open-description">
  <h3 class="title">Beschreibung</h3>
   <div class="methodsynopsis dc-description">
    <span class="type">resource</span> <span class="methodname">proc_open</span>
     ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$cmd</code></span>
    , <span class="methodparam"><span class="type">array</span> <code class="parameter">$descriptorspec</code></span>
    , <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$pipes</code></span>
    [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$cwd</code></span>
    [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$env</code></span>
    [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$other_options</code></span>
   ]]] )</div>

  <p class="para rdfs-comment">
   <span class="function">proc_open</span> ist äquivalent zu <span class="function">popen</span>,
   ermöglicht aber einen höheren Grad von Kontrolle über die Programmausführung.
  </p>



 </div>


 <div class="refsect1 parameters" id="refsect1-function.proc-open-parameters">
  <h3 class="title">Parameter-Liste</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">cmd</code></dt>

     <dd>

      <p class="para">
       Das auszuführende Kommando.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">descriptorspec</code></dt>

     <dd>

      <p class="para">
       Ein indexiertes Array, in dem die Schlüssel die Descriptornummer und die
       Werte die Art und Weise repräsentieren, in der PHP die Descriptoren
       an die Child-Prozesse übergibt. 0 steht dabei für STDIN, 1 für STDOUT
       und 2 für STDERR.
      </p>
      <p class="para">
       Jedes Element kann sein:
       <ul class="simplelist">
        <li class="member">
         Ein Array, das die Pipe beschreibt, die an den Prozess übergeben wird.
         Das erste Element ist der Descriptortyp, das zweite Element ist eine
         Option für den angegebenen Typ. Gültige Typen sind
         <em>pipe</em> (das zweite Element ist entweder
         <em>r</em>, um das Ende des Leseprozesses der Pipe an den
         Prozess zu übergeben, oder <em>w</em>, um das Ende des
         Schreibprozesses zu übergeben) und <em>file</em> (das
         zweite Element ist ein Dateiname).
        </li>
        <li class="member">
         Eine Streamressource, die einen echten Filedescriptor repräsentiert
         (z.B. geöffnete Dateien, Sockets, <strong><code>STDIN</code></strong>).
        </li>
       </ul>
      </p>
      <p class="para">
       Die Filedescriptor-Nummern sind nicht limitiert auf 0, 1 und 2, Sie
       können jede gültige Filedescriptor-Nummer angeben, die an den Kindprozess
       übergeben wird. Dies erlaubt es Ihrem Skript, mit anderen Skripten zu
       interagieren, die als &quot;Co-Prozesse&quot; laufen. Dies ist insbesondere dann
       nützlich, wenn Passwörter an Programme wie PGP, GPG und openssl auf
       sichere Art übergeben werden sollen. Es ist ebenfalls nützlich, um
       Lesestatus-Informationen zu erhalten, die von diesen Programmen für
       zusätzliche Filedescriptoren ermittelt werden.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">pipes</code></dt>

     <dd>

      <p class="para">
       Enthält ein numerisches Array von Dateizeigern, die der PHP-Seite jeder
       erstellten Pipe entsprechen.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">cwd</code></dt>

     <dd>

      <p class="para">
       Das initiale Arbeitsverzeichnis des Kommandos. Dies muss ein
       <em class="emphasis">absoluter</em> Pfadname sein. Wenn Sie
       den Standardwert verwenden möchten (dies wäre das Arbeitsverzeichnis
       des aktuellen PHP-Prozesses), muss der Wert <strong><code>NULL</code></strong> sein.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">env</code></dt>

     <dd>

      <p class="para">
       Ein Array mit den Umgebungsvariablen für das auszuführende Kommando, oder
       <strong><code>NULL</code></strong>, wenn Sie das gleiche Environment wie der aktuelle PHP-Prozess
       nutzen wollen.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">other_options</code></dt>

     <dd>

      <p class="para">
       Erlaubt Ihnen, zusätzliche Optionen anzugeben. Derzeit unterstützte
       Optionen sind:
       <ul class="simplelist">
        <li class="member">
         <em>suppress_errors</em> (nur unter Windows): Unterdrückt
         Fehlermeldungen, die durch diese Funktion hervorgerufen werden, sofern
         der Wert auf <strong><code>TRUE</code></strong> gesetzt wurde.
        </li>
        <li class="member">
         <em>bypass_shell</em> (nur unter Windows): umgeht die
         <em>cmd.exe</em>-Shell, wenn der Wert auf <strong><code>TRUE</code></strong> gesetzt
         wurde.
        </li>
       </ul>
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.proc-open-returnvalues">
  <h3 class="title">Rückgabewerte</h3>
  <p class="para">
   Gibt eine Ressource zurück, die den Prozess repräsentiert, der unter
   Verwendung von <span class="function">proc_close</span> freigegeben werden soll, wenn
   Sie ihn beenden. Im Fehlerfall wird <strong><code>FALSE</code></strong> zurückgegeben.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.proc-open-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Beschreibung</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.2.1</td>
       <td>
        Die Option <em>bypass_shell</em> wurde dem Parameter
        <code class="parameter">other_options</code> hinzugefügt.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.proc-open-examples">
  <h3 class="title">Beispiele</h3>
  <p class="para">
   <div class="example" id="example-4126">
    <p><strong>Beispiel #1 Ein <span class="function">proc_open</span>-Beispiel</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$descriptorspec&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"pipe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">),&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;STDIN&nbsp;ist&nbsp;eine&nbsp;Pipe,&nbsp;von&nbsp;der&nbsp;das&nbsp;Child&nbsp;liest<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"pipe"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"w"</span><span style="color: #007700">),&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;STDOUT&nbsp;ist&nbsp;eine&nbsp;Pipe,&nbsp;in&nbsp;die&nbsp;das&nbsp;Child&nbsp;schreibt<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"file"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/tmp/error-output.txt"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"a"</span><span style="color: #007700">)&nbsp;</span><span style="color: #FF8000">//&nbsp;STDERR&nbsp;ist&nbsp;eine&nbsp;Datei,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;in&nbsp;die&nbsp;geschrieben&nbsp;wird<br /></span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$cwd&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/tmp'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$env&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'some_option'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'aeiou'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$process&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">proc_open</span><span style="color: #007700">(</span><span style="color: #DD0000">'php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$descriptorspec</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pipes</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cwd</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$env</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">is_resource</span><span style="color: #007700">(</span><span style="color: #0000BB">$process</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$pipes&nbsp;sieht&nbsp;nun&nbsp;so&nbsp;aus:<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;0&nbsp;=&gt;&nbsp;Schreibhandle,&nbsp;das&nbsp;auf&nbsp;das&nbsp;Child&nbsp;STDIN&nbsp;verbunden&nbsp;ist<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1&nbsp;=&gt;&nbsp;Lesehandle,&nbsp;das&nbsp;auf&nbsp;das&nbsp;Child&nbsp;STDOUT&nbsp;verbunden&nbsp;ist<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Jedwede&nbsp;Fehlerausgaben&nbsp;werden&nbsp;an&nbsp;/tmp/error-output.txt&nbsp;angefügt<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$pipes</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'&lt;?php&nbsp;print_r($_ENV);&nbsp;?&gt;'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$pipes</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">stream_get_contents</span><span style="color: #007700">(</span><span style="color: #0000BB">$pipes</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$pipes</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Es&nbsp;ist&nbsp;wichtig,&nbsp;dass&nbsp;Sie&nbsp;alle&nbsp;Pipes&nbsp;schließen&nbsp;bevor&nbsp;Sie<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;proc_close&nbsp;aufrufen,&nbsp;um&nbsp;Deadlocks&nbsp;zu&nbsp;vermeiden<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$return_value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">proc_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$process</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Rückgabewert&nbsp;des&nbsp;Kommandos:&nbsp;</span><span style="color: #0000BB">$return_value</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>Das oben gezeigte Beispiel erzeugt
eine ähnliche Ausgabe wie:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [some_option] =&gt; aeiou
    [PWD] =&gt; /tmp
    [SHLVL] =&gt; 1
    [_] =&gt; /usr/local/bin/php
)
Rückgabewert des Kommandos: 0
</pre></div>
    </div>
   </div>
  </p>



 </div>


 <div class="refsect1 notes" id="refsect1-function.proc-open-notes">
  <h3 class="title">Anmerkungen</h3>
  <blockquote class="note"><p><strong class="note">Hinweis</strong>: 
   <p class="para">
    Windows-Kompatibilität: Descriptoren höher 2 (STDERR) sind Childprozessen
    als vererbbare Handles verfügbar, aber da die Windows-Architektur die
    Nummern der Filedescriptoren nicht mit Low-Level-Handles verbindet, hat
    der Kindprozess (bis jetzt) keine Möglichkeit, diese Handles anzusprechen.
    STDIN, STDOUT und STDERR funktionieren wie erwartet.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Hinweis</strong>: 
   <p class="para">
    Wenn Sie nur eine unidirektionale (Einweg-)Prozesspipe benötigen, nutzen Sie
    besser <span class="function">popen</span>, da diese Funktion leichter zu verwenden
    ist.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.proc-open-seealso">
  <h3 class="title">Siehe auch</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function">popen</span></li>
    <li class="member"><span class="function">exec</span></li>
    <li class="member"><span class="function">system</span></li>
    <li class="member"><span class="function">passthru</span></li>
    <li class="member"><span class="function">stream_select</span></li>
    <li class="member">Der <a href="language.operators.execution.html" class="link">Backtick-Operator</a></li>
   </ul>
  </p>
 </div>


</div>
        </td>
    </tr>
</table>
</body>
</html>
