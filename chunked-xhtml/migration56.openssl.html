<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: OpenSSL &Auml;nderungen in PHP 5.6.x</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="appendices.html">Appendices</a></li>
  <li class="header up"><a href="migration56.html">Migration von PHP 5.5.x auf PHP 5.6.x</a></li>
  <li><a href="migration56.incompatible.html">Nicht abw&auml;rtskompatible &Auml;nderungen</a></li>
  <li><a href="migration56.new-features.html">Neue Features</a></li>
  <li><a href="migration56.deprecated.html">Veraltete Features in PHP 5.6.x</a></li>
  <li><a href="migration56.changed-functions.html">Ge&auml;nderte Funktionen</a></li>
  <li><a href="migration56.new-functions.html">Neue Funktionen</a></li>
  <li class="active"><a href="migration56.openssl.html">OpenSSL &Auml;nderungen in PHP 5.6.x</a></li>
  <li><a href="migration56.extensions.html">Andere &Auml;nderungen bei Extensions</a></li>
  <li><a href="migration56.constants.html">Neue globale Konstanten</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="migration56.new-functions.html">Neue Funktionen</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="migration56.extensions.html">Andere &Auml;nderungen bei Extensions</a></div>
                <div class="up"><a href="migration56.html">Migration von PHP 5.5.x auf PHP 5.6.x</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="migration56.openssl" class="sect1">
 <h2 class="title">OpenSSL Änderungen in PHP 5.6.x</h2>

 <div class="sect2" id="migration56.openssl.peer-verification">
  <h3 class="title">Streamwrapper verifizieren nun standardmäßig Zertifikate und Hostnamen bei Verwendung von SSL/TLS</h3>

  
   <p class="para">
    Alle verschlüsselten Clientstreams verifizieren nun standardmäßig den 
    Kommunikationspartner. Standardmäßig wird dafür das Standard-CA-Bundle
    von OpenSSL zur Verifikation des Peer-Zertifikates herangezogen. In
    den meisten Fällen sind keine Änderungen notwendig, um mit Servern
    mit gültigen SSL-Zertifikaten zu kommunizieren, da Distributoren
    üblicherweise OpenSSL mit vertrauenswürdigen CA-Bundles konfigurieren.
   </p>

   <p class="para">
    Das Standard-CA-Bundle kann global durch eine Änderung der 
    konfigurationseinstellungen openssl.cafile oder openssl.capath
    überschrieben werden, oder für einzelne Requests durch die
    Verwendung der Kontextoptionen
    <a href="context.ssl.html#context.ssl.cafile" class="link"><code class="parameter">cafile</code></a> oder
    <a href="context.ssl.html#context.ssl.capath" class="link"><code class="parameter">capath</code></a>.
   </p>

   <p class="para">
    Obwohl dies generell nicht empfehlenswert ist, kann die Verifikation
    der Peer-Zertifikate für einzelne Requests ausgeschaltet werden, indem
    die Kontextoption
    <a href="context.ssl.html#context.ssl.verify-peer" class="link"><code class="parameter">verify_peer</code></a>
    auf <strong><code>FALSE</code></strong> gesetzt wird. Die Verifikation des Peer-Namen kann durch
    das Setzen von
    <code class="parameter">verify_peer_name</code>
    
    auf <strong><code>FALSE</code></strong> ausgeschaltet werden.
   </p>

 </div>

 <div class="sect2" id="migration56.openssl.fingerprint">
  <h3 class="title">Fingerabdrücke von Zertifikaten</h3>

  <p class="para">
   Es wurde Unterstützung für das Auslesen und Verifizieren von Fingerabdrücken
   von Zertifikaten hinzugefügt. <span class="function">openssl_x509_fingerprint</span> 
   kam hinzu, um den Fingerabdruck aus X.509-Zertifikaten auszulesen und zwei
   neue <a href="context.ssl.html" class="link">SSL Streamkontext</a>-Optionen wurden
   hinzugefügt: <em>capture_peer_cert</em> zum Auslesen des X.509-
   Zertifikats des Kommunikationspartners und <em>peer_fingerprint</em>
   zur Durchsetzung, dass das Zertifikat des Kommunikationspartners dem
   angegebenen Fingerabdruck entsprechen muss.
  </p>
 </div>

 <div class="sect2" id="migration56.openssl.ciphers">
  <h3 class="title">Aktualisierung der Standardchiffre</h3>

  <p class="para">
   Die von PHP verwendeten Standardchiffre wurden auf eine sicherere Liste
   aktualisiert, basierend auf den
   <a href="https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_Ciphersuite" class="link external">&raquo;&nbsp;Mozilla Chiffreempfehlungen</a>,
   mit zwei zusätzlichen Ausnahmen: anonyme Diffie-Hellman Chiffre und RC4.
  </p>

  <p class="para">
   Auf diese Liste kann mit der neuen Konstanten 
   <strong><code>OPENSSL_DEFAULT_STREAM_CIPHERS</code></strong> zugegriffen und (wie in 
   früheren PHP-Versionen) durch das Setzen der Kontextoption 
   <a href="context.ssl.html#context.ssl.ciphers" class="link"><code class="parameter">ciphers</code></a>
   überschrieben werden.
  </p>
 </div>

 <div class="sect2" id="migration56.openssl.tls-compression">
  <h3 class="title">Komprimierung standardmäßig deaktiviert</h3>

  <p class="para">
   Komprimierung von SSL/TLS wurde standardmäßig deaktiviert, um die
   CRIME-Attacke zu umgehen. PHP 5.4.13 fügte die Kontextoption
   <a href="context.ssl.html#context.ssl.disable-compression" class="link"><code class="parameter">disable_compression</code></a>
   hinzu, um die Komprimierung zu deaktivieren. Dies ist nun standardmäßig
   auf <strong><code>TRUE</code></strong> (d.h. Komprimierung deaktiviert) gesetzt.
  </p>
 </div>

 <div class="sect2" id="migration56.openssl.honor-cipher-order">
  <h3 class="title">Servern ist erlaubt die Reihenfolge bevorzugter Chiffre festzulegen</h3>

  <p class="para">
   Die SSL Kontextoption <code class="parameter">honor_cipher_order</code> wurde
   hinzugefügt, um Servern von verschlüsselten Streams die Umgehung der
   BEAST-Schwachstelle zu ermöglichen, indem die Chiffre des Servers gegenüber
   denen des Clients bevorzugt werden.
  </p>
 </div>

 <div class="sect2" id="migration56.openssl.metadata">
  <h3 class="title">Zugriff auf ausgehandeltes Protokoll und Chiffre</h3>

  <p class="para">
   Auf das Protokoll und den Chiffre, die für einen verschlüsselten Stream
   ausgehandelt wurden, kann nun mittels 
   <span class="function">stream_get_meta_data</span> oder
   <span class="function">stream_context_get_options</span> zugegriffen werden, wenn
   die SSL-Kontextoption <code class="parameter">capture_session_meta</code> auf
   <strong><code>TRUE</code></strong> gesetzt ist.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$ctx&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">([</span><span style="color: #DD0000">'ssl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'capture_session_meta'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">TRUE<br /></span><span style="color: #007700">]]);<br /><br /></span><span style="color: #0000BB">$html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'https://google.com/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ctx</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$meta&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_get_options</span><span style="color: #007700">(</span><span style="color: #0000BB">$ctx</span><span style="color: #007700">)[</span><span style="color: #DD0000">'ssl'</span><span style="color: #007700">][</span><span style="color: #DD0000">'session_meta'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$meta</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <p class="para">Das oben gezeigte Beispiel erzeugt folgende
Ausgabe:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(4) {
  [&quot;protocol&quot;]=&gt;
  string(5) &quot;TLSv1&quot;
  [&quot;cipher_name&quot;]=&gt;
  string(20) &quot;ECDHE-RSA-AES128-SHA&quot;
  [&quot;cipher_bits&quot;]=&gt;
  int(128)
  [&quot;cipher_version&quot;]=&gt;
  string(11) &quot;TLSv1/SSLv3&quot;
}
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration56.openssl.forward-secrecy">
  <h3 class="title">Neue Optionen für Perfect Forward Secrecy bei Servern für verschlüsselte Streams</h3>

  <p class="para">
   Verschlüsselte Clientstreams unterstützen Perfect Forward Secrecy bereits, da
   dies üblicherweise vom Server kontrolliert wird. Es muss nichts zusätzlich
   unternommen werden, um PFS bei verschlüsselten PHP-Server-Streams zu aktivieren,
   die Zertifikate verwenden welche Perfect Forward Secrecy unterstützen. Es wurden
   jedoch einige neue SSL-Kontextoptionen hinzugefügt, welche mehr Kontrolle über
   PFS erlauben und eventuell auftretende Kompatibilitätsprobleme behandeln. 
  </p>

  <dl>

   
    <dt>
<code class="parameter">ecdh_curve</code></dt>

    <dd>

     <p class="para">
      Diese Option erlaubt die Auswahl einer spezifischen Kurve für 
      ECDH-Chiffre. Falls nicht angegeben wird <em>prime256v1</em>
      verwendet.
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">dh_param</code></dt>

    <dd>

     <p class="para">
      Pfad zu einer Datei welche Parameter für den 
      Diffie-Hellman-Schlüsselaustausch enthalt, wie diese beispielsweise
      durch folgenden Befehl erzeugt würde:
     </p>
     <div class="example-contents">
<div class="shellcode"><pre class="shellcode">openssl dhparam -out /pfad/zu/meinen/zertifikaten/dh-2048.pem 2048</pre>
</div>
     </div>

    </dd>

   
   
    <dt>
<code class="parameter">single_dh_use</code></dt>

    <dd>

     <p class="para">
      Ist dies auf <strong><code>TRUE</code></strong> gesetzt, wird ein neues Schlüsselpaar erzeugt,
      wenn Diffie-Hellman-Parameter verwendet werden, wodurch sich die
      Forward Secrecy verbessert.
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">single_ecdh_use</code></dt>

    <dd>

     <p class="para">
      Ist dies auf <strong><code>TRUE</code></strong> gesetzt, wird immer ein neues Schlüsselpaar erzeugt,
      wenn ein ECDH-Chiffre ausgehandelt wird. Dies verbessert die 
      Forward Secrecy.
     </p>
    </dd>

   
  </dl>

 </div>

 <div class="sect2" id="migration56.openssl.crypto-method">
  <h3 class="title">SSL/TLS Versionsauswahl</h3>

  <p class="para">
   Es ist nun möglich die spezifischen Versionen von SSL oder TLS mittels
   der SSL-Kontextoption <code class="parameter">crypto_method</code> oder durch
   die Angabe eines spezifischen Transportes bei der Erzeugung des 
   Streamwrappers auszuwählen (beispielsweise indem 
   <span class="function">stream_socket_client</span> oder 
   <span class="function">stream_socket_server</span> aufgerufen wird).
  </p>

  <p class="para">
   Die SSL-Kontextoption <code class="parameter">crypto_method</code> enthält
   eine Bitmaske in der die erlaubten Protokolle aufgezählt sind.
   Der Parameter <code class="parameter">crypto_type</code> von 
   <span class="function">stream_socket_enable_crypto</span> verhält sich
   genauso.
   
  </p>

  <table class="segmentedlist">
   <caption><strong>Ausgewählte Protokollversionen und zugehörige Optionen</strong></caption>
   <thead><tr><th>Protokoll(e)</th>
   <th>Client-Flag</th>
   <th>Server-Flag</th>
   <th>Transport</th>
   </tr></thead><tbody><tr class="seglistitem">
    <td class="seg">Beliebige Version von TLS oder SSL</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_ANY_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_ANY_SERVER</code></strong></td>
    <td class="seg"><em>ssl://</em></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">Beliebige TLS-Version</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLS_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLS_SERVER</code></strong></td>
    <td class="seg"><em>tls://</em></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">TLS 1.0</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_0_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_0_SERVER</code></strong></td>
    <td class="seg"><em>tlsv1.0://</em></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">TLS 1.1</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_1_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_1_SERVER</code></strong></td>
    <td class="seg"><em>tlsv1.1://</em></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">TLS 1.2</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_TLSv1_2_SERVER</code></strong></td>
    <td class="seg"><em>tlsv1.2://</em></td>
   </tr>
   <tr class="seglistitem">
    <td class="seg">SSL 3</td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_SSLv3_CLIENT</code></strong></td>
    <td class="seg"><strong><code>STREAM_CRYPTO_METHOD_SSLv3_SERVER</code></strong></td>
    <td class="seg"><em>sslv3://</em></td>
   </tr>
  </tbody></table>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;Voraussetzen&nbsp;von&nbsp;TLS&nbsp;1.0&nbsp;oder&nbsp;neuer&nbsp;bei&nbsp;Verwendung&nbsp;von&nbsp;<br />//&nbsp;file_get_contents():<br /></span><span style="color: #0000BB">$ctx&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'ssl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'crypto_method'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">STREAM_CRYPTO_METHOD_TLS_CLIENT</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />]);<br /></span><span style="color: #0000BB">$html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'https://google.com/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ctx</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;TLS&nbsp;1.1&nbsp;oder&nbsp;1.2&nbsp;voraussetzen:<br /></span><span style="color: #0000BB">$ctx&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'ssl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'crypto_method'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">STREAM_CRYPTO_METHOD_TLSv1_1_CLIENT&nbsp;</span><span style="color: #007700">|<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />]);<br /></span><span style="color: #0000BB">$html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'https://google.com/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ctx</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Verbindung&nbsp;mittels&nbsp;tlsv1.2://&nbsp;Stream-Socket-Transport.<br /></span><span style="color: #0000BB">$sock&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_socket_client</span><span style="color: #007700">(</span><span style="color: #DD0000">'tlsv1.2://google.com:443/'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration56.openssl.default-certificate-paths">
  <h3 class="title"><span class="function">openssl_get_cert_locations</span> hinzugefügt</h3>

  <p class="para">
   Die Funktion <span class="function">openssl_get_cert_locations</span> wurde 
   hinzugefügt: Sie gibt den Standard-Ablageort aus, der von PHP bei der
   Suche von CA-Bundles verwendet wird.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">openssl_get_cert_locations</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <p class="para">Das oben gezeigte Beispiel erzeugt folgende
Ausgabe:</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(8) {
  [&quot;default_cert_file&quot;]=&gt;
  string(21) &quot;/etc/pki/tls/cert.pem&quot;
  [&quot;default_cert_file_env&quot;]=&gt;
  string(13) &quot;SSL_CERT_FILE&quot;
  [&quot;default_cert_dir&quot;]=&gt;
  string(18) &quot;/etc/pki/tls/certs&quot;
  [&quot;default_cert_dir_env&quot;]=&gt;
  string(12) &quot;SSL_CERT_DIR&quot;
  [&quot;default_private_dir&quot;]=&gt;
  string(20) &quot;/etc/pki/tls/private&quot;
  [&quot;default_default_cert_area&quot;]=&gt;
  string(12) &quot;/etc/pki/tls&quot;
  [&quot;ini_cafile&quot;]=&gt;
  string(0) &quot;&quot;
  [&quot;ini_capath&quot;]=&gt;
  string(0) &quot;&quot;
}
</pre></div>
   </div>
  </div>
 </div>

 <div class="sect2" id="migration56.openssl.spki">
  <h3 class="title">SPKI-Unterstützung</h3>

  <p class="para">
   Unterstützung für die Erzeugung, das Auslesen uns Verifizieren von
   Signed Public Key And Challenges wurde (SPKAC) wurde hinzugefügt.
   Die Funktionen <span class="function">openssl_spki_new</span>,
   <span class="function">openssl_spki_verify</span>,
   <span class="function">openssl_spki_export_challenge</span> und
   <span class="function">openssl_spki_export</span> wurden hinzugefügt, welche
   die durch ein <em>KeyGen</em> HTML5-Element erzeugten SPKACs
   erzeugen, verifizieren oder den PEM Public Key und zugehörige Challenge
   exportieren.
  </p>

  <dl>

   
    <dt>
<code class="parameter">openssl_spki_new</code></dt>

    <dd>

     <p class="para">
      Erzeugt eine neue SPKAC mit einem privaten Schlüssel, Challenge-String
      und Hashalgorithmus.
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pkey&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">openssl_pkey_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret&nbsp;passphrase'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$spkac&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'challenge&nbsp;string'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <p class="para">Das oben gezeigte Beispiel erzeugt folgende
Ausgabe:</p>
      <div class="example-contents screen">
<div class="cdata"><pre>
SPKAC=MIIBXjCByDCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA3L0IfUijj7+A8CPC8EmhcdNoe5fUAog7OrBdhn7EkxFButUp40P7+LiYiygYG1TmoI/a5EgsLU3s9twEz3hmgY9mYIqb/rb+SF8qlD/K6KVyUORC7Wlz1Df4L8O3DuRGzx6/+3jIW6cPBpfgH1sVuYS1vDBsP/gMMIxwTsKJ4P0CAwEAARYkYjViMzYxMTktNjY5YS00ZDljLWEyYzctMGZjNGFhMjVlMmE2MA0GCSqGSIb3DQEBAwUAA4GBAF7hu0ifzmjonhAak2FhhBRsKFDzXdKIkrWxVNe8e0bZzMrWOxFM/rqBgeH3/gtOUDRS5Fnzyq425UsTYbjfiKzxGeCYCQJb1KJ2V5Ij/mIJHZr53WYEXHQTNMGR8RPm7IxwVXVSHIgAfXsXZ9IXNbFbcaLRiSTr9/N4U+MXUWL7
</pre></div>
      </div>
     </div>
    </dd>

   

   
    <dt>
<code class="parameter">openssl_spki_verify</code></dt>

    <dd>

     <p class="para">
      Verifiziert eine angegebene SPKAC.
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pkey&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">openssl_pkey_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret&nbsp;passphrase'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$spkac&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'challenge&nbsp;string'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">openssl_spki_verify</span><span style="color: #007700">(</span><span style="color: #0000BB">$spkac</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </dd>

   

   
    <dt>
<code class="parameter">openssl_spki_export_challenge</code></dt>

    <dd>

     <p class="para">
      Exportiert eine zugehörige Challenge einer angegebenen SPKAC.
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pkey&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">openssl_pkey_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret&nbsp;passphrase'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$spkac&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'challenge&nbsp;string'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$challenge&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_export_challenge</span><span style="color: #007700">(</span><span style="color: #0000BB">$spkac</span><span style="color: #007700">):<br />echo&nbsp;</span><span style="color: #0000BB">$challenge</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <p class="para">Das oben gezeigte Beispiel erzeugt folgende
Ausgabe:</p>
      <div class="example-contents screen">
<div class="cdata"><pre>
challenge string
</pre></div>
      </div>
     </div>
    </dd>

   

   
    <dt>
<code class="parameter">openssl_spki_export</code></dt>

    <dd>

     <p class="para">
      Exportiert den öffentlichen RSA-Schlüssel einer SPKAC
      in PEM-Format.
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pkey&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_pkey_new</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">openssl_pkey_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret&nbsp;passphrase'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$spkac&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">openssl_spki_new</span><span style="color: #007700">(</span><span style="color: #0000BB">$pkey</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'challenge&nbsp;string'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">openssl_spki_export</span><span style="color: #007700">(</span><span style="color: #0000BB">$spkac</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <p class="para">Das oben gezeigte Beispiel erzeugt folgende
Ausgabe:</p>
      <div class="example-contents screen">
<div class="cdata"><pre>
-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDcvQh9SKOPv4DwI8LwSaFx02h7
l9QCiDs6sF2GfsSTEUG61SnjQ/v4uJiLKBgbVOagj9rkSCwtTez23ATPeGaBj2Zg
ipv+tv5IXyqUP8ropXJQ5ELtbXPUN/gvw7cO5EbPHr/7eMhbpw8Gl+AfWxW5hLW8
MGw/+AwwjHBOwong/QIDAQAB
-----END PUBLIC KEY-----
</pre></div>
      </div>
     </div>
    </dd>

   
  </dl>

 </div>
</div>
        </td>
    </tr>
</table>
</body>
</html>
