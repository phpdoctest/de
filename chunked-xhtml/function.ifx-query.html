<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: Schickt eine Informix Abfrage an den Server</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="funcref.html">Funktionsreferenz</a></li>
  <li class="header up"><a href="refs.database.html">Datenbankerweiterungen</a></li>
  <li class="header up"><a href="refs.database.vendors.html">Anbieterspezifische Datenbankerweiterungen</a></li>
  <li class="header up"><a href="book.ifx.html">Informix</a></li>
  <li class="header up"><a href="ref.ifx.html">Informix Funktionen</a></li>
  <li><a href="function.ifx-affected-rows.html">ifx_affected_rows</a></li>
  <li><a href="function.ifx-blobinfile-mode.html">ifx_blobinfile_mode</a></li>
  <li><a href="function.ifx-byteasvarchar.html">ifx_byteasvarchar</a></li>
  <li><a href="function.ifx-close.html">ifx_close</a></li>
  <li><a href="function.ifx-connect.html">ifx_connect</a></li>
  <li><a href="function.ifx-copy-blob.html">ifx_copy_blob</a></li>
  <li><a href="function.ifx-create-blob.html">ifx_create_blob</a></li>
  <li><a href="function.ifx-create-char.html">ifx_create_char</a></li>
  <li><a href="function.ifx-do.html">ifx_do</a></li>
  <li><a href="function.ifx-error.html">ifx_error</a></li>
  <li><a href="function.ifx-errormsg.html">ifx_errormsg</a></li>
  <li><a href="function.ifx-fetch-row.html">ifx_fetch_row</a></li>
  <li><a href="function.ifx-fieldproperties.html">ifx_fieldproperties</a></li>
  <li><a href="function.ifx-fieldtypes.html">ifx_fieldtypes</a></li>
  <li><a href="function.ifx-free-blob.html">ifx_free_blob</a></li>
  <li><a href="function.ifx-free-char.html">ifx_free_char</a></li>
  <li><a href="function.ifx-free-result.html">ifx_free_result</a></li>
  <li><a href="function.ifx-get-blob.html">ifx_get_blob</a></li>
  <li><a href="function.ifx-get-char.html">ifx_get_char</a></li>
  <li><a href="function.ifx-getsqlca.html">ifx_getsqlca</a></li>
  <li><a href="function.ifx-htmltbl-result.html">ifx_htmltbl_result</a></li>
  <li><a href="function.ifx-nullformat.html">ifx_nullformat</a></li>
  <li><a href="function.ifx-num-fields.html">ifx_num_fields</a></li>
  <li><a href="function.ifx-num-rows.html">ifx_num_rows</a></li>
  <li><a href="function.ifx-pconnect.html">ifx_pconnect</a></li>
  <li><a href="function.ifx-prepare.html">ifx_prepare</a></li>
  <li class="active"><a href="function.ifx-query.html">ifx_query</a></li>
  <li><a href="function.ifx-textasvarchar.html">ifx_textasvarchar</a></li>
  <li><a href="function.ifx-update-blob.html">ifx_update_blob</a></li>
  <li><a href="function.ifx-update-char.html">ifx_update_char</a></li>
  <li><a href="function.ifxus-close-slob.html">ifxus_close_slob</a></li>
  <li><a href="function.ifxus-create-slob.html">ifxus_create_slob</a></li>
  <li><a href="function.ifxus-free-slob.html">ifxus_free_slob</a></li>
  <li><a href="function.ifxus-open-slob.html">ifxus_open_slob</a></li>
  <li><a href="function.ifxus-read-slob.html">ifxus_read_slob</a></li>
  <li><a href="function.ifxus-seek-slob.html">ifxus_seek_slob</a></li>
  <li><a href="function.ifxus-tell-slob.html">ifxus_tell_slob</a></li>
  <li><a href="function.ifxus-write-slob.html">ifxus_write_slob</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="function.ifx-prepare.html">ifx_prepare</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="function.ifx-textasvarchar.html">ifx_textasvarchar</a></div>
                <div class="up"><a href="ref.ifx.html">Informix Funktionen</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="function.ifx-query" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">ifx_query</h1>
    <p class="refpurpose">Schickt eine Informix Abfrage an den Server</p>
   </div>
   <div class="refsect1 unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-seealtp" id="refsect1-function.ifx-query-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-unknown-seealtp">
    <h3 class="title">Beschreibung</h3>
     <div class="methodsynopsis dc-description">
      <span class="type">int</span> <span class="methodname">ifx_query</span>
       ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>
      , <span class="methodparam"><span class="type">int</span> <code class="parameter">$link_identifier</code></span>
      [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$cursor_type</code></span>
      [, <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$
        blobidarray
       </code></span>
     ]] )</div>

    <p class="para rdfs-comment"> 
     Gibt bei Erfolg einen positiven Integerwert als Ergebniskennung
     zurück oder <strong><code>FALSE</code></strong>, falls ein Fehler auftrat.
    </p>
    <p class="para">
     Die Ergebniskennung, &quot;result-id&quot;, wird von anderen Funktionen
     benutzt. Die Zahl der betroffenen Zeilen wird für spätere Abfragen
     mit <span class="function">ifx_affected_rows</span> gesetzt. 
    </p>
    <p class="para">
     <span class="function">ifx_query</span> schickt eine Abfrage an die
     gegenwärtig aktive Datenbank auf dem Server, die durch die angegebene
     Verbindungskennung bezeichnet wird.     
    </p>
    <p class="para">
     Auf der Verbindung <code class="parameter">conn_id</code> wird eine
     <code class="parameter">query</code> ausgeführt. Bei SELECT-Abfragen wird ein
     Cursor deklariert und geöffnet. Mit dem optionalen Parameter
     <code class="parameter">cursor_type</code> können Sie bestimmen, ob dies ein
     &quot;scroll&quot;- und/oder ein &quot;hold&quot;-Cursor sein soll. Dies ist eine
     Bitmaske, die entweder die Werte IFX_SCROLL, IFX_HOLD oder beides
     (mit OR verknüpft) annehmen kann. Andere Abfragen auuser SELECTs
     werden unverzüglich ausgeführt. IFX_SCROLL und IFX_HOLD sind
     symbolische Konstanten und sollten nicht in Anführungszeichen eingeschlossen werden. Wenn Sie den Parameter weglassen, definieren
     Sie einen ganz normalen sequentiellen Cursor.
    </p>
    <p class="para">
     Für jeden Abfragetyp wird die Anzahl der betroffenen Zeilen (geschätzt oder wirklich) für spätere Abfragen mit <span class="function">ifx_affected_rows</span> gespeichert.
    </p>
    <p class="para">
     Falls Sie BLOB-Felder (BYTE oder TEXT) in einem UPDATE haben, können
     Sie den Parameter <code class="parameter">blobidarray</code> benutzen, der
     die entsprechenden blob-ids enthält und Sie sollten diese Felder in
     der Abfrage durch &quot;?&quot; ersetzen.
    </p>
    <p class="para">
     Falls der Inhalt der TEXT- (oder BYTE) Spalte es erlaubt, können Sie
     auch &quot;ifx_textasvarchar(1)&quot; und &quot;ifx_byteasvarchar(1)&quot; benutzen.
     Damit können Sie TEXT- oder BYTE-Felder behandeln, als wären sie
     normale (nur sehr lange) VARCHAR-Felder in SELECT-Abfragen und Sie
     brauchen sich nicht um blob-IDs kümmern.
    </p>
    <p class="para">
     Mit ifx_textasvarchar(0) oder ifx_byteasvarchar(0) (der
     Standardeinstellung) werden für BLOB-Spalten in SELECT-Abfragen die
     blob-ids (Integerwerte) zurückgegeben. Sie können die Inhalte der
     BLOBs mit den BLOB-Funktionen als Zeichenketten oder Dateien erhalten
     (siehe weiter unten). 
    </p>
    <p class="para">     
     <div class="example" id="example-1268">
      <p><strong>Beispiel #1 
       Gibt alle Zeilen der &quot;orders&quot;-Tabelle als HTML-Tabelle zurück
      </strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />ifx_textasvarchar</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;"text&nbsp;mode"&nbsp;bei&nbsp;blobs&nbsp;benutzen<br /></span><span style="color: #0000BB">$res_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ifx_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;orders"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">);<br />if&nbsp;(!&nbsp;</span><span style="color: #0000BB">$res_id</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Kann&nbsp;orders&nbsp;nicht&nbsp;abfragen:&nbsp;%s\n&lt;br&nbsp;/&gt;%s&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ifx_error</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">ifx_errormsg</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;die;<br />}<br /></span><span style="color: #0000BB">ifx_htmltbl_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$res_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"border=\"1\""</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">ifx_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$res_id</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
      <div class="example" id="example-1269">
       <p><strong>Beispiel #2 Ein paar Werte in die &quot;catalog&quot;-Tabelle einfügen</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;blob&nbsp;id's&nbsp;für&nbsp;byte-&nbsp;und&nbsp;text-Spalten&nbsp;erzeugen<br /></span><span style="color: #0000BB">$textid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ifx_create_blob</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Text&nbsp;Spalte&nbsp;im&nbsp;Speicher"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$byteid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ifx_create_blob</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Byte&nbsp;Spalte&nbsp;im&nbsp;Speicher"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;blob&nbsp;id's&nbsp;in&nbsp;einem&nbsp;blobid&nbsp;array&nbsp;speichern<br /></span><span style="color: #0000BB">$blobidarray</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$textid</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$blobidarray</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$byteid</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Abfrage&nbsp;ausführen<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"insert&nbsp;into&nbsp;catalog&nbsp;(stock_num,&nbsp;manu_code,&nbsp;"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"cat_descr,cat_picture)&nbsp;values(1,'HRO',?,?)"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$res_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ifx_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$blobidarray</span><span style="color: #007700">);<br />if&nbsp;(!&nbsp;</span><span style="color: #0000BB">$res_id</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;...&nbsp;Fehler&nbsp;...&nbsp;*/<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #FF8000">//&nbsp;Speicher&nbsp;freigeben<br /></span><span style="color: #0000BB">ifx_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$res_id</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
     <p class="para">
       Siehe auch: <span class="function">ifx_connect</span>.
    </p>
   </div>

  </div>
        </td>
    </tr>
</table>
</body>
</html>
