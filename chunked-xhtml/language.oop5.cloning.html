<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: Objekte klonen</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="langref.html">Sprachreferenz</a></li>
  <li class="header up"><a href="language.oop5.html">Klassen und Objekte</a></li>
  <li><a href="oop5.intro.html">Einf&uuml;hrung</a></li>
  <li><a href="language.oop5.basic.html">Die Grundlagen</a></li>
  <li><a href="language.oop5.properties.html">Eigenschaften</a></li>
  <li><a href="language.oop5.constants.html">Klassenkonstanten</a></li>
  <li><a href="language.oop5.autoload.html">Autoloading</a></li>
  <li><a href="language.oop5.decon.html">Konstruktoren und Destruktoren</a></li>
  <li><a href="language.oop5.visibility.html">Sichtbarkeit</a></li>
  <li><a href="language.oop5.inheritance.html">Objekt-Vererbung</a></li>
  <li><a href="language.oop5.paamayim-nekudotayim.html">G&uuml;ltigkeitsbereichsoperator (::)</a></li>
  <li><a href="language.oop5.static.html">Static-Schl&uuml;sselwort</a></li>
  <li><a href="language.oop5.abstract.html">Klassenabstraktion</a></li>
  <li><a href="language.oop5.interfaces.html">Interfaces</a></li>
  <li><a href="language.oop5.traits.html">Traits</a></li>
  <li><a href="language.oop5.anonymous.html">Anonyme Klassen</a></li>
  <li><a href="language.oop5.overloading.html">&Uuml;berladung</a></li>
  <li><a href="language.oop5.iterations.html">Objektiteration</a></li>
  <li><a href="language.oop5.magic.html">Magische Methoden</a></li>
  <li><a href="language.oop5.final.html">Final-Schl&uuml;sselwort</a></li>
  <li class="active"><a href="language.oop5.cloning.html">Objekte klonen</a></li>
  <li><a href="language.oop5.object-comparison.html">Objekte vergleichen</a></li>
  <li><a href="language.oop5.typehinting.html">Type-Hints</a></li>
  <li><a href="language.oop5.late-static-bindings.html">Sp&auml;te statische Bindung</a></li>
  <li><a href="language.oop5.references.html">Objekte und Referenzen</a></li>
  <li><a href="language.oop5.serialization.html">Serialisierung von Objekten</a></li>
  <li><a href="language.oop5.changelog.html">OOP-Changelog</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="language.oop5.final.html">Final-Schl&uuml;sselwort</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="language.oop5.object-comparison.html">Objekte vergleichen</a></div>
                <div class="up"><a href="language.oop5.html">Klassen und Objekte</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="language.oop5.cloning" class="sect1">
  <h2 class="title">Objekte klonen</h2>

  <p class="para">
   Eine Kopie eines Objektes mit vollständig replizierten Eigenschaften zu
   erzeugen, ist nicht immer das gewünschte Verhalten. Ein gutes Beispiel für
   die Notwendigkeit von Kopierkonstruktoren ist ein Objekt, welches ein GTK
   Fenster repräsentiert und dieses Objekt enthält die Ressource des GTK-Fensters.
   Wenn Sie ein Duplikat dieses Objektes erzeugen, könnten Sie
   ein neues Fenster mit gleichen Eigenschaften erzeugen wollen und das neue
   Objekt soll die Ressource des neuen Fensters speichern.
   Ein weiteres Beispiel ist ein Objekt, welches eine Referenz auf ein anderes
   Objekt, das es benutzt, hält und wenn das Vaterobjekt repliziert wird, will
   man eine neue Instanz dieses anderen Objektes erzeugen, damit das Replikat
   eine eigene Kopie besitzt.
  </p>

  <p class="para">
   Eine Objektkopie wird durch die Nutzung des <em class="emphasis">clone</em> 
   Schlüsselwortes (welches wenn möglich die 
   <a href="language.oop5.cloning.html#object.clone" class="link">__clone()</a>-Methode des Objektes aufruft) 
   erzeugt. Die <a href="language.oop5.cloning.html#object.clone" class="link">__clone()</a>-Methode eines 
   Objektes kann nicht direkt aufgerufen werden.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
$kopie_des_objektes = clone $objekt;
</pre></div>
   </div>

  </div>

  <p class="para">
   Wenn ein Objekt geklont wird, wird PHP 5 eine seichte Kopie der Eigenschaften
   des Objektes durchführen. Alle Eigenschaften, die Referenzen auf andere
   Variablen sind, werden Referenzen bleiben.
  </p>

  <div class="methodsynopsis dc-description" id="object.clone">
   <span class="type">void</span> <span class="methodname">__clone</span>
    ( <span class="methodparam">void</span>
   )</div>


  <p class="para">
   Sobald der Klonvorgang abgeschlossen und eine <a href="language.oop5.cloning.html#object.clone" class="link">__clone()</a>-
   Methode definiert ist, so wird die <a href="language.oop5.cloning.html#object.clone" class="link">__clone()</a>-Methode
   des neu erzeugten Objekts aufgerufen, damit alle notwendigen Eigenschaften verändert werden
   können.
  </p>

  <div class="example" id="example-239">
   <p><strong>Beispiel #1 Ein Objekt klonen</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">SubObject<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;</span><span style="color: #0000BB">$instanzen&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$instanz</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">instanz&nbsp;</span><span style="color: #007700">=&nbsp;++</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$instanzen</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__clone</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">instanz&nbsp;</span><span style="color: #007700">=&nbsp;++</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$instanzen</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />class&nbsp;</span><span style="color: #0000BB">MyCloneable<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$objekt1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$objekt2</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">__clone</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Erzwinge&nbsp;eine&nbsp;Kopie&nbsp;von&nbsp;this-&gt;object,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;andernfalls&nbsp;wird&nbsp;es&nbsp;auf&nbsp;das&nbsp;selbe&nbsp;Objekt&nbsp;zeigen<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">objekt1&nbsp;</span><span style="color: #007700">=&nbsp;clone&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">objekt1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MyCloneable</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">objekt1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SubObject</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">objekt2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SubObject</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$obj2&nbsp;</span><span style="color: #007700">=&nbsp;clone&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">;<br /><br /><br />print(</span><span style="color: #DD0000">"Original&nbsp;Objekt:\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br /><br />print(</span><span style="color: #DD0000">"geklontes&nbsp;Objekt:\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>Das oben gezeigte Beispiel erzeugt folgende
Ausgabe:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Original Objekt:
MyCloneable Object
(
    [object1] =&gt; SubObject Object
        (
            [instanz] =&gt; 1
        )

    [object2] =&gt; SubObject Object
        (
            [instanz] =&gt; 2
        )

)
geklontes Object:
MyCloneable Object
(
    [objekt1] =&gt; SubObject Object
        (
            [instanz] =&gt; 3
        )

    [objekt2] =&gt; SubObject Object
        (
            [instanz] =&gt; 2
        )

)
</pre></div>

   </div>

  </div>

 </div>
        </td>
    </tr>
</table>
</body>
</html>
