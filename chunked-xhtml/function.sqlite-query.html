<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: F&uuml;hrt auf einer Datenbank eine Abfrage durch und liefert das Abfrageergebnis zur&uuml;ck</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="funcref.html">Funktionsreferenz</a></li>
  <li class="header up"><a href="refs.database.html">Datenbankerweiterungen</a></li>
  <li class="header up"><a href="refs.database.vendors.html">Anbieterspezifische Datenbankerweiterungen</a></li>
  <li class="header up"><a href="book.sqlite.html">SQLite</a></li>
  <li class="header up"><a href="ref.sqlite.html">SQLite Funktionen</a></li>
  <li><a href="function.sqlite-array-query.html">sqlite_array_query</a></li>
  <li><a href="function.sqlite-busy-timeout.html">sqlite_busy_timeout</a></li>
  <li><a href="function.sqlite-changes.html">sqlite_changes</a></li>
  <li><a href="function.sqlite-close.html">sqlite_close</a></li>
  <li><a href="function.sqlite-column.html">sqlite_column</a></li>
  <li><a href="function.sqlite-create-aggregate.html">sqlite_create_aggregate</a></li>
  <li><a href="function.sqlite-create-function.html">sqlite_create_function</a></li>
  <li><a href="function.sqlite-current.html">sqlite_current</a></li>
  <li><a href="function.sqlite-error-string.html">sqlite_error_string</a></li>
  <li><a href="function.sqlite-escape-string.html">sqlite_escape_string</a></li>
  <li><a href="function.sqlite-exec.html">sqlite_exec</a></li>
  <li><a href="function.sqlite-factory.html">sqlite_factory</a></li>
  <li><a href="function.sqlite-fetch-all.html">sqlite_fetch_all</a></li>
  <li><a href="function.sqlite-fetch-array.html">sqlite_fetch_array</a></li>
  <li><a href="function.sqlite-fetch-column-types.html">sqlite_fetch_column_types</a></li>
  <li><a href="function.sqlite-fetch-object.html">sqlite_fetch_object</a></li>
  <li><a href="function.sqlite-fetch-single.html">sqlite_fetch_single</a></li>
  <li><a href="function.sqlite-fetch-string.html">sqlite_fetch_string</a></li>
  <li><a href="function.sqlite-field-name.html">sqlite_field_name</a></li>
  <li><a href="function.sqlite-has-more.html">sqlite_has_more</a></li>
  <li><a href="function.sqlite-has-prev.html">sqlite_has_prev</a></li>
  <li><a href="function.sqlite-key.html">sqlite_key</a></li>
  <li><a href="function.sqlite-last-error.html">sqlite_last_error</a></li>
  <li><a href="function.sqlite-last-insert-rowid.html">sqlite_last_insert_rowid</a></li>
  <li><a href="function.sqlite-libencoding.html">sqlite_libencoding</a></li>
  <li><a href="function.sqlite-libversion.html">sqlite_libversion</a></li>
  <li><a href="function.sqlite-next.html">sqlite_next</a></li>
  <li><a href="function.sqlite-num-fields.html">sqlite_num_fields</a></li>
  <li><a href="function.sqlite-num-rows.html">sqlite_num_rows</a></li>
  <li><a href="function.sqlite-open.html">sqlite_open</a></li>
  <li><a href="function.sqlite-popen.html">sqlite_popen</a></li>
  <li><a href="function.sqlite-prev.html">sqlite_prev</a></li>
  <li class="active"><a href="function.sqlite-query.html">sqlite_query</a></li>
  <li><a href="function.sqlite-rewind.html">sqlite_rewind</a></li>
  <li><a href="function.sqlite-seek.html">sqlite_seek</a></li>
  <li><a href="function.sqlite-single-query.html">sqlite_single_query</a></li>
  <li><a href="function.sqlite-udf-decode-binary.html">sqlite_udf_decode_binary</a></li>
  <li><a href="function.sqlite-udf-encode-binary.html">sqlite_udf_encode_binary</a></li>
  <li><a href="function.sqlite-unbuffered-query.html">sqlite_unbuffered_query</a></li>
  <li><a href="function.sqlite-valid.html">sqlite_valid</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="function.sqlite-prev.html">sqlite_prev</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="function.sqlite-rewind.html">sqlite_rewind</a></div>
                <div class="up"><a href="ref.sqlite.html">SQLite Funktionen</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="function.sqlite-query" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">sqlite_query</h1>
  <h1 class="refname">SQLiteDatabase::query</h1>
  <p class="refpurpose">Führt auf einer Datenbank eine Abfrage durch und liefert das Abfrageergebnis zurück</p>
 </div>

 <div class="refsect1 description" id="refsect1-function.sqlite-query-description">
  <h3 class="title">Beschreibung</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> <span class="methodname">sqlite_query</span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$dbhandle</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$result_type</code><span class="initializer"> = SQLITE_BOTH</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter reference">&$error_msg</code></span>
  ]] )</div>

  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> <span class="methodname">sqlite_query</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>
   , <span class="methodparam"><span class="type">resource</span> <code class="parameter">$dbhandle</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$result_type</code><span class="initializer"> = SQLITE_BOTH</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter reference">&$error_msg</code></span>
  ]] )</div>

  <p class="para rdfs-comment">Objektorientierter Stil (Methode):</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">SQLiteResult</span> <span class="methodname">SQLiteDatabase::query</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$result_type</code><span class="initializer"> = SQLITE_BOTH</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter reference">&$error_msg</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Führt eine, durch den Parameter <code class="parameter">query</code> übergebene, 
   SQL-Anfrage auf der übergebenen Datenbank-Verbindung aus.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.sqlite-query-parameters">
  <h3 class="title">Parameter-Liste</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">dbhandle</code></dt>

     <dd>

      <p class="para">
       Die SQLite-Datenbankressource, zurückgegeben von 
       <span class="function">sqlite_open</span>, wenn prozedural genutzt.
       In der objektorientierten Notation wird dieser Parameter nicht
       benötigt.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">query</code></dt>

     <dd>

      <p class="para">
       Die auszuführende Anfrage.
      </p>
      <p class="para">
       Daten innerhalb einer Anfrage sollten <a href="function.sqlite-escape-string.html" class="link">maskiert</a> werden.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">result_type</code></dt>

     <dd>

      <p class="para">Der optionale Parameter
<code class="parameter">Ergebnis_Typ</code> akzeptiert eine Konstante und bestimmt,
wie das zurückgegebene Array indiziert wird. Während mit
<strong><code>SQLITE_ASSOC</code></strong> nur assoziative Indizes (Namensfelder)
zurückgegeben werden, werden mit <strong><code>SQLITE_NUM</code></strong> nur
numerische Indizes (geordnete Feldnummern) zurückgegeben.
<strong><code>SQLITE_BOTH</code></strong> gibt sowohl assoziative als auch numerische
Indizes zurück. <strong><code>SQLITE_BOTH</code></strong> ist die
Standardeinstellung.</p>
     </dd>

    
    
     <dt>
<code class="parameter">error_msg</code></dt>

     <dd>

      <p class="para">
       Die spezifizierte Variable wird im Falle eines Fehlers gesetzt.
       Diese ist besonders wichtig, denn SQL-Syntaxfehler können nicht mittels
       <span class="function">sqlite_last_error</span> ausgelesen werden.
      </p>
     </dd>

    

   </dl>

  </p>
  <blockquote class="note"><p><strong class="note">Hinweis</strong>: <span class="simpara">Zwei alternative Syntaxen werden
für die Kompatibilität mit anderen Datenbank-Erweiterungen (wie z.B. MySQL)
unterstützt. Die bevorzugte Form ist die erste, bei der der Parameter
<code class="parameter">dbhandle</code> der erste Parameter der Funktion
ist.</span></p></blockquote>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.sqlite-query-returnvalues">
  <h3 class="title">Rückgabewerte</h3>
  <p class="para">
   Diese Funktion gibt ein Ergebnis-Handle zurück. Im Fehlerfall wird <strong><code>FALSE</code></strong> zurückgegeben.
   Für Anfragen, die Reihen liefern, kann das Abfrageergebnis mit Funktionen, wie
   <span class="function">sqlite_seek</span> oder <span class="function">sqlite_fetch_array</span>
   augelesen werden.
  </p>
  <p class="para">
   Ungeachtet des Anfrage-Typs, gibt diese Funktion <strong><code>FALSE</code></strong> zurück, wenn
   die Anfrage fehlschlägt.
  </p>
  <p class="para">
   <span class="function">sqlite_query</span> gib ein gepuffertes Ergebnis, dessen Zeilen 
   einzeln ansprechbar sind. Dies ist für kleine Abfragen nützlich, bei 
   denen man abwechselnd unterschiedliche Zeilen abfragen will. 
   Die gepufferten Ergebnisse belegen Speicher, um das gesamte Ergebnis
   halten zu können. Dieser Speicher wird erst dann wieder freigegeben, 
   wenn das komplette Ergebnis durchlaufen wurde. Wenn nur ein sequentieller 
   Zugriff auf die Daten nötig ist, wird empfohlen, die performantere 
   Funktion <span class="function">sqlite_unbuffered_query</span> zu nutzen. 
  </p>
 </div>


<div class="refsect1 changelog" id="refsect1-function.sqlite-query-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Beschreibung</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.1.0</td>
       <td>
        <code class="parameter">error_msg</code> wurde hinzugefügt
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.sqlite-query-notes">
  <h3 class="title">Anmerkungen</h3>
  <div class="warning"><strong class="warning">Warnung</strong>
   <p class="simpara">
    SQlite ist in der Lage durch <em class="emphasis">Semikolon getrennte Anfragen</em> in einem Schub auszuführen.
    Diese können aus einer Datei geladen oder durch ein Skript bereitgestellt werden.
    Wie auch immer, das funktioniert nur, wenn 
    das Ergebins der Anfrage nicht benutzt wird. Sollte es doch genutzt werden, wird 
    nur die erste SQL-Anfrage der Liste ausgeführt. Die Funktion
    <span class="function">sqlite_exec</span> wird immer Mehrfach-Anfragen ausführen.
   </p>
   <p class="simpara">
    Wenn Mehrfach-Anfrage ausgeführt werden, wird die Funktion im Fehlerfall 
    <strong><code>FALSE</code></strong> zurückgeben, anderenfalls jedoch ein undefiniertes Ergebnis 
    (das kann, sollte die Anfrage gelingen, <strong><code>TRUE</code></strong> oder ein Ergebnis-Handle sein).
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.sqlite-query-seealso">
  <h3 class="title">Siehe auch</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function">sqlite_unbuffered_query</span></li>
    <li class="member"><span class="function">sqlite_array_query</span></li>
   </ul>
  </p>
 </div>

</div>
        </td>
    </tr>
</table>
</body>
</html>
