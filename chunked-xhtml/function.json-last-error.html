<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP-Handbuch: Gibt den letzten aufgetretenen Fehler zur&uuml;ck</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP-Handbuch</a></li>
  <li class="header up"><a href="funcref.html">Funktionsreferenz</a></li>
  <li class="header up"><a href="refs.basic.other.html">Sonstige Grunderweiterungen</a></li>
  <li class="header up"><a href="book.json.html">JSON</a></li>
  <li class="header up"><a href="ref.json.html">JSON-Funktionen</a></li>
  <li><a href="function.json-decode.html">json_decode</a></li>
  <li><a href="function.json-encode.html">json_encode</a></li>
  <li><a href="function.json-last-error-msg.html">json_last_error_msg</a></li>
  <li class="active"><a href="function.json-last-error.html">json_last_error</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="function.json-last-error-msg.html">json_last_error_msg</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="book.judy.html">Judy</a></div>
                <div class="up"><a href="ref.json.html">JSON-Funktionen</a></div>
                <div class="home"><a href="index.html">PHP-Handbuch</a></div>
            </div><hr/>
<div id="function.json-last-error" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">json_last_error</h1>
  <p class="refpurpose">Gibt den letzten aufgetretenen Fehler zurück</p>
 </div>

 <div class="refsect1 description" id="refsect1-function.json-last-error-description">
  <h3 class="title">Beschreibung</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname">json_last_error</span>
    ( <span class="methodparam">void</span>
   )</div>

  <p class="para rdfs-comment">
   Gibt (sofern vorhanden) den letzten Fehler zurück, der beim letzten Kodieren/Dekodieren
   von JSON aufgetreten ist.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.json-last-error-parameters">
  <h3 class="title">Parameter-Liste</h3>
  <p class="para">Diese Funktion hat keine Parameter.</p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.json-last-error-returnvalues">
  <h3 class="title">Rückgabewerte</h3>
  <p class="para">
   Gibt einen Integer zurück, der Wert kann eine der folgenden Konstanten sein:
  </p>
  <table class="doctable table">
   <caption><strong>JSON-Fehlercodes</strong></caption>
   
    <thead>
     <tr>
      <th>Konstante</th>
      <th>Bedeutung</th>
      <th>Verfügbarkeit</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><strong><code>JSON_ERROR_NONE</code></strong></td>
      <td>Kein Fehler aufgetreten.</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><strong><code>JSON_ERROR_DEPTH</code></strong></td>
      <td>Die maximale Stacktiefe wurde überschritten.</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><strong><code>JSON_ERROR_STATE_MISMATCH</code></strong></td>
      <td>Ungültiges oder missgestaltetes JSON</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><strong><code>JSON_ERROR_CTRL_CHAR</code></strong></td>
      <td>Steuerzeichenfehler, möglicherweise unkorrekt kodiert.</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><strong><code>JSON_ERROR_SYNTAX</code></strong></td>
      <td>Syntaxfehler.</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><strong><code>JSON_ERROR_UTF8</code></strong></td>
      <td>Missgestaltete UTF-8 Zeichen, möglicherweise fehlerhaft kodiert</td>
      <td>PHP 5.3.3</td>
     </tr>

     <tr>
      <td><strong><code>JSON_ERROR_RECURSION</code></strong></td>
      <td>Eine oder mehrere rekursive Referenzen im zu kodierenden Wert</td>
      <td>PHP 5.5.0</td>
     </tr>

     <tr>
      <td><strong><code>JSON_ERROR_INF_OR_NAN</code></strong></td>
      <td>
       Eine oder mehrere
       <a href="language.types.float.html#language.types.float.nan" class="link"><strong><code>NAN</code></strong></a>
       oder <a href="function.is-infinite.html" class="link"><strong><code>INF</code></strong></a>
       Werte im zu kodierenden Wert
      </td>
      <td>PHP 5.5.0</td>
     </tr>

     <tr>
      <td><strong><code>JSON_ERROR_UNSUPPORTED_TYPE</code></strong></td>
      <td>Ein Wert eines Typs, der nicht kodiert werden kann, wurde übergeben</td>
      <td>PHP 5.5.0</td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.json-last-error-examples">
  <h3 class="title">Beispiele</h3>
  <p class="para">
   <div class="example" id="example-4249">
    <p><strong>Beispiel #1 <span class="function">json_last_error</span>-Beispiel</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Ein&nbsp;gültiger&nbsp;JSON-String<br /></span><span style="color: #0000BB">$json</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #DD0000">'{"Organisation":&nbsp;"PHP-Dokumentationsteam"}'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Ein&nbsp;ungültiger&nbsp;JSON-String,&nbsp;der&nbsp;einen&nbsp;Syntaxfehler&nbsp;hervorruft,<br />//&nbsp;in&nbsp;diesem&nbsp;Fall&nbsp;werden&nbsp;'&nbsp;anstelle&nbsp;von&nbsp;"&nbsp;als&nbsp;Anführungszeichen&nbsp;verwendet<br /></span><span style="color: #0000BB">$json</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #DD0000">"{'Organisation':&nbsp;'PHP-Dokumentationsteam'}"</span><span style="color: #007700">;<br /><br /><br />foreach(</span><span style="color: #0000BB">$json&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Dekodiere:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">json_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">$string</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;switch(</span><span style="color: #0000BB">json_last_error</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">JSON_ERROR_NONE</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;-&nbsp;Keine&nbsp;Fehler'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">JSON_ERROR_DEPTH</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;-&nbsp;Maximale&nbsp;Stacktiefe&nbsp;überschritten'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">JSON_ERROR_STATE_MISMATCH</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;-&nbsp;Unterlauf&nbsp;oder&nbsp;Nichtübereinstimmung&nbsp;der&nbsp;Modi'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">JSON_ERROR_CTRL_CHAR</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;-&nbsp;Unerwartetes&nbsp;Steuerzeichen&nbsp;gefunden'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">JSON_ERROR_SYNTAX</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;-&nbsp;Syntaxfehler,&nbsp;ungültiges&nbsp;JSON'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">JSON_ERROR_UTF8</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;-&nbsp;Missgestaltete&nbsp;UTF-8&nbsp;Zeichen,&nbsp;möglicherweise&nbsp;fehlerhaft&nbsp;kodiert'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;-&nbsp;Unbekannter&nbsp;Fehler'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>Das oben gezeigte Beispiel erzeugt folgende
Ausgabe:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Decoding: {&quot;Organisation&quot;: &quot;PHP-Dokumentationsteam&quot;} - Keine Fehler
Decoding: {&#039;Organisation&#039;: &#039;PHP-Dokumentationsteam&#039;} - Syntaxfehler, ungültiges JSON
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4250">
    <p><strong>Beispiel #2 <span class="function">json_last_error</span> mit <span class="function">json_encode</span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Eine&nbsp;ungültige&nbsp;UTF8&nbsp;Sequenz<br /></span><span style="color: #0000BB">$text&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\xB1\x31"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$json&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$text</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">json_last_error</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$json</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">JSON_ERROR_UTF8</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>Das oben gezeigte Beispiel erzeugt folgende
Ausgabe:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
string(4) &quot;null&quot;
bool(true)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.json-last-error-seealso">
  <h3 class="title">Siehe auch</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function">json_last_error_msg</span></li>
    <li class="member"><span class="function">json_decode</span></li>
    <li class="member"><span class="function">json_encode</span></li>
   </ul>
  </p>
 </div>


</div>
        </td>
    </tr>
</table>
</body>
</html>
